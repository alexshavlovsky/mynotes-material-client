(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PiXc:function(t,e,o){"use strict";o.r(e);var n=o("ofXK"),s=o("tyNb"),c=function(t){return t.FetchAllNotebooksRequest="[Notebooks Container] Fetch All Notebooks Request",t.FetchAllNotebooksApiCall="[Store Cache Core] Fetch All Notebooks API call",t.FetchAllNotebooksSuccess="[API] Fetch All Notebooks Success",t.FetchAllNotebooksFailure="[API] Fetch All Notebooks Failure",t.CreateNotebookRequest="[Notebooks Container] Create Notebook Request",t.UpdateNotebookRequest="[Notebooks Container] Rename Notebook Request",t.DeleteNotebookRequest="[Notebooks Container] Delete Notebook Request",t.InvalidateNotebooksStore="[Notebooks Container/UI] Invalidate Notebooks Store",t.ParentNotebookAtomicUpdate="[Child Note Effect] Parent Notebook Atomic Update",t.SetNotebooksSearchMode="[Notebooks List Page] Set Notebooks search mode",t.ResetNotebooksSearchMode="[Notebooks List Page] Reset Notebooks search mode",t.SearchQueryChange="[Notebooks List Page] Search Query Change",t.LoadNotebooks="[Notebook] Load Notebooks",t.AddNotebook="[Notebook] Add Notebook",t.UpsertNotebook="[Notebook] Upsert Notebook",t.AddNotebooks="[Notebook] Add Notebooks",t.UpsertNotebooks="[Notebook] Upsert Notebooks",t.UpdateNotebook="[Notebook] Update Notebook",t.UpdateNotebooks="[Notebook] Update Notebooks",t.DeleteNotebook="[Notebook] Delete Notebook",t.DeleteNotebooks="[Notebook] Delete Notebooks",t.ClearNotebooks="[Notebook] Clear Notebooks",t}({});class i{constructor(){this.type=c.FetchAllNotebooksRequest}}class a{constructor(){this.type=c.FetchAllNotebooksApiCall}}class r{constructor(t){this.payload=t,this.type=c.FetchAllNotebooksSuccess}}class b{constructor(t){this.payload=t,this.type=c.FetchAllNotebooksFailure}}class l{constructor(t){this.payload=t,this.type=c.CreateNotebookRequest}}class d{constructor(t){this.payload=t,this.type=c.UpdateNotebookRequest}}class u{constructor(t){this.payload=t,this.type=c.DeleteNotebookRequest}}class p{constructor(t){this.payload=t,this.type=c.ParentNotebookAtomicUpdate}}class h{constructor(){this.type=c.SetNotebooksSearchMode}}class f{constructor(){this.type=c.ResetNotebooksSearchMode}}class m{constructor(t){this.payload=t,this.type=c.SearchQueryChange}}class g{constructor(t){this.payload=t,this.type=c.LoadNotebooks}}class k{constructor(t){this.payload=t,this.type=c.AddNotebook}}class N{constructor(t){this.payload=t,this.type=c.UpdateNotebook}}class y{constructor(t){this.payload=t,this.type=c.DeleteNotebook}}class O{constructor(){this.type=c.ClearNotebooks}}var C=o("fXoL"),I=o("kt0X"),j=o("8B9z");let w=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.store.dispatch(new i)}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(I.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notebooks-container"]],decls:2,vars:0,template:function(t,e){1&t&&(C.Pb(0,"app-nav-bar"),C.Pb(1,"router-outlet"))},directives:[j.a,s.i],styles:["","[_nghost-%COMP%]{position:absolute;top:56px;bottom:0;left:0;right:0}"]}),t})();var v=o("XNiG"),U=o("0IaG"),x=o("3Pt+"),A=o("kmnG"),T=o("qFsG"),B=o("bTqV");let F=(()=>{class t{constructor(t,e,o){this.fb=t,this.dialogRef=e,this.data=o}ngOnInit(){this.form=this.fb.group({nameInput:[this.data.nameCurrent,[]]})}confirm(){this.dialogRef.close({newName:this.form.value.nameInput})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(x.c),C.Ob(U.g),C.Ob(U.a))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notebook-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","formControlName","nameInput",3,"placeholder","keydown.enter"],["align","end"],["mat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(C.Ub(0,"h2",0),C.Bc(1),C.Tb(),C.Ub(2,"mat-dialog-content",1),C.Ub(3,"mat-form-field"),C.Ub(4,"input",2),C.cc("keydown.enter",(function(t){return e.confirm()})),C.Tb(),C.Tb(),C.Tb(),C.Ub(5,"mat-dialog-actions",3),C.Ub(6,"button",4),C.cc("click",(function(t){return e.close()})),C.Bc(7),C.Tb(),C.Ub(8,"button",4),C.cc("click",(function(t){return e.confirm()})),C.Bc(9),C.Tb(),C.Tb()),2&t&&(C.Cb(1),C.Cc(e.data.title),C.Cb(1),C.nc("formGroup",e.form),C.Cb(2),C.nc("placeholder",e.data.namePlaceholder),C.Cb(3),C.Cc(e.data.cancelButton),C.Cb(2),C.Cc(e.data.confirmButton))},directives:[U.h,U.e,x.m,x.g,A.b,T.a,x.b,x.l,x.e,U.d,B.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var M=o("IzEk"),$=o("vkgz"),S=o("Kj3r"),P=o("/uUt"),R=o("pLZG"),D=o("lJxs"),q=function(t){return t.FetchNotesByNotebookIdRequest="[Notes List Page] Fetch Notes By Notebook Id Request",t.FetchNotesByNotebookIdApiCall="[Store Cache Core] Fetch Notes By Notebook Id API call",t.FetchNotesByNotebookIdSuccess="[API] Fetch Notes By Notebook Id Success",t.FetchNotesByNotebookIdFailure="[API] Fetch Notes By Notebook Id Failure",t.FetchAllNotesRequest="[Notebooks Container] Fetch All Notes Request",t.FetchAllNotesApiCall="[Store Cache Core] Fetch All Notes API call",t.FetchAllNotesSuccess="[API] Fetch All Notes Success",t.FetchAllNotesFailure="[API] Fetch All Notes Failure",t.CreateNoteRequest="[Notebooks Container] Create Note Request",t.UpdateNoteRequest="[Notebooks Container] Update Note Request",t.DeleteNoteRequest="[Notebooks Container] Delete Note Request",t.LoadNotes="[Note] Load Notes",t.AddNote="[Note] Add Note",t.UpsertNote="[Note] Upsert Note",t.AddNotes="[Note] Add Notes",t.UpsertNotes="[Note] Upsert Notes",t.UpdateNote="[Note] Update Note",t.UpdateNotes="[Note] Update Notes",t.DeleteNote="[Note] Delete Note",t.DeleteNotes="[Note] Delete Notes",t.ClearNotes="[Note] Clear Notes",t}({});class L{constructor(t){this.payload=t,this.type=q.FetchNotesByNotebookIdRequest}}class _{constructor(t){this.payload=t,this.type=q.FetchNotesByNotebookIdApiCall}}class z{constructor(t){this.payload=t,this.type=q.FetchNotesByNotebookIdSuccess}}class E{constructor(t){this.payload=t,this.type=q.FetchNotesByNotebookIdFailure}}class Q{constructor(){this.type=q.FetchAllNotesRequest}}class G{constructor(){this.type=q.FetchAllNotesApiCall}}class Y{constructor(t){this.payload=t,this.type=q.FetchAllNotesSuccess}}class V{constructor(t){this.payload=t,this.type=q.FetchAllNotesFailure}}class W{constructor(t){this.payload=t,this.type=q.CreateNoteRequest}}class X{constructor(t){this.payload=t,this.type=q.UpdateNoteRequest}}class J{constructor(t){this.payload=t,this.type=q.DeleteNoteRequest}}class K{constructor(t){this.payload=t,this.type=q.LoadNotes}}class H{constructor(t){this.payload=t,this.type=q.AddNote}}class Z{constructor(t){this.payload=t,this.type=q.UpsertNotes}}class tt{constructor(t){this.payload=t,this.type=q.UpdateNote}}class et{constructor(t){this.payload=t,this.type=q.DeleteNote}}class ot{constructor(t){this.payload=t,this.type=q.DeleteNotes}}class nt{constructor(){this.type=q.ClearNotes}}const st=function(){var t={EntitiesOnly:0,Both:1,None:2};return t[t.EntitiesOnly]="EntitiesOnly",t[t.Both]="Both",t[t.None]="None",t}();function ct(t){return function(e,o){const n={ids:[...o.ids],entities:Object.assign({},o.entities)},s=t(e,n);return s===st.Both?Object.assign({},o,n):s===st.EntitiesOnly?Object.assign({},o,{entities:n.entities}):o}}function it(t,e){const o=e(t);return Object(C.W)()&&void 0===o&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),o}function at(t){function e(e,o){const n=it(e,t);return n in o.entities?st.None:(o.ids.push(n),o.entities[n]=e,st.Both)}function o(t,o){let n=!1;for(const s of t)n=e(s,o)!==st.None||n;return n?st.Both:st.None}function n(t,e){const o=(t instanceof Array?t:e.ids.filter(o=>t(e.entities[o]))).filter(t=>t in e.entities).map(t=>delete e.entities[t]).length>0;return o&&(e.ids=e.ids.filter(t=>t in e.entities)),o?st.Both:st.None}function s(e,o){const n={};return(e=e.filter(t=>t.id in o.entities)).length>0?e.filter(e=>function(e,o,n){const s=Object.assign({},n.entities[o.id],o.changes),c=it(s,t),i=c!==o.id;return i&&(e[o.id]=c,delete n.entities[o.id]),n.entities[c]=s,i}(n,e,o)).length>0?(o.ids=o.ids.map(t=>n[t]||t),st.Both):st.EntitiesOnly:st.None}function c(e,n){const c=[],i=[];for(const o of e){const e=it(o,t);e in n.entities?i.push({id:e,changes:o}):c.push(o)}const a=s(i,n),r=o(c,n);switch(!0){case r===st.None&&a===st.None:return st.None;case r===st.Both||a===st.Both:return st.Both;default:return st.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:ct(e),addMany:ct(o),addAll:ct((function(t,e){return e.ids=[],e.entities={},o(t,e),st.Both})),updateOne:ct((function(t,e){return s([t],e)})),updateMany:ct(s),upsertOne:ct((function(t,e){return c([t],e)})),upsertMany:ct(c),removeOne:ct((function(t,e){return n([t],e)})),removeMany:ct(n),map:ct((function(t,e){return s(e.ids.reduce((o,n)=>{const s=t(e.entities[n]);return s!==e.entities[n]&&o.push({id:n,changes:s}),o},[]).filter(({id:t})=>t in e.entities),e)}))}}function rt(t={}){const{selectId:e,sortComparer:o}=Object.assign({sortComparer:!1,selectId:t=>t.id},t),n={getInitialState:function(t={}){return Object.assign({ids:[],entities:{}},t)}},s={getSelectors:function(t){const e=t=>t.ids,o=t=>t.entities,n=Object(I.p)(e,o,(t,e)=>t.map(t=>e[t])),s=Object(I.p)(e,t=>t.length);return t?{selectIds:Object(I.p)(t,e),selectEntities:Object(I.p)(t,o),selectAll:Object(I.p)(t,n),selectTotal:Object(I.p)(t,s)}:{selectIds:e,selectEntities:o,selectAll:n,selectTotal:s}}},c=o?function(t,e){const{removeOne:o,removeMany:n,removeAll:s}=at(t);function c(e,o){const n=e.filter(e=>!(it(e,t)in o.entities));return 0===n.length?st.None:(r(n,o),st.Both)}function i(e,o){const n=[],s=e.filter(e=>function(e,o,n){if(!(o.id in n.entities))return!1;const s=Object.assign({},n.entities[o.id],o.changes),c=it(s,t);return delete n.entities[o.id],e.push(s),c!==o.id}(n,e,o)).length>0;if(0===n.length)return st.None;{const t=o.ids,e=[];return o.ids=o.ids.filter((t,n)=>t in o.entities||(e.push(n),!1)),r(n,o),!s&&e.every(e=>o.ids[e]===t[e])?st.EntitiesOnly:st.Both}}function a(e,o){const n=[],s=[];for(const c of e){const e=it(c,t);e in o.entities?s.push({id:e,changes:c}):n.push(c)}const a=i(s,o),r=c(n,o);switch(!0){case r===st.None&&a===st.None:return st.None;case r===st.Both||a===st.Both:return st.Both;default:return st.EntitiesOnly}}function r(o,n){o.sort(e);const s=[];let c=0,i=0;for(;c<o.length&&i<n.ids.length;){const a=o[c],r=it(a,t),b=n.ids[i];e(a,n.entities[b])<=0?(s.push(r),c++):(s.push(b),i++)}n.ids=s.concat(c<o.length?o.slice(c).map(t):n.ids.slice(i)),o.forEach((e,o)=>{n.entities[t(e)]=e})}return{removeOne:o,removeMany:n,removeAll:s,addOne:ct((function(t,e){return c([t],e)})),updateOne:ct((function(t,e){return i([t],e)})),upsertOne:ct((function(t,e){return a([t],e)})),addAll:ct((function(t,e){return e.entities={},e.ids=[],c(t,e),st.Both})),addMany:ct(c),updateMany:ct(i),upsertMany:ct(a),map:ct((function(t,e){return i(e.ids.reduce((o,n)=>{const s=t(e.entities[n]);return s!==e.entities[n]&&o.push({id:n,changes:s}),o},[]),e)}))}}(e,o):at(e);return Object.assign({selectId:e,sortComparer:o},n,s,c)}const bt=Object(I.o)("notebooks"),lt=rt(),dt=lt.getInitialState({relevance:null,spinner:!1,searchMode:!1,searchQuery:""});function ut(t=dt,e){switch(e.type){case c.InvalidateNotebooksStore:return Object.assign(Object.assign({},t),{relevance:null});case c.FetchAllNotebooksApiCall:return Object.assign(Object.assign({},t),{spinner:!0});case c.FetchAllNotebooksSuccess:return Object.assign(Object.assign({},t),{relevance:e.payload.relevance,spinner:!1});case c.FetchAllNotebooksFailure:return Object.assign(Object.assign({},t),{spinner:!1});case c.ParentNotebookAtomicUpdate:{const o=e.payload.notebookId,n=t.entities[o],s=n.size+e.payload.sizeDelta;return Object.assign(Object.assign({},t),{entities:Object.assign(Object.assign({},t.entities),{[o]:Object.assign(Object.assign({},n),{size:s})})})}case c.SetNotebooksSearchMode:return Object.assign(Object.assign({},t),{searchMode:!0});case c.ResetNotebooksSearchMode:return Object.assign(Object.assign({},t),{searchMode:!1});case c.SearchQueryChange:return Object.assign(Object.assign({},t),{searchQuery:e.payload.searchQuery});case c.AddNotebook:return lt.addOne(e.payload.notebook,t);case c.UpsertNotebook:return lt.upsertOne(e.payload.notebook,t);case c.AddNotebooks:return lt.addMany(e.payload.notebooks,t);case c.UpsertNotebooks:return lt.upsertMany(e.payload.notebooks,t);case c.UpdateNotebook:return lt.updateOne(e.payload.notebook,t);case c.UpdateNotebooks:return lt.updateMany(e.payload.notebooks,t);case c.DeleteNotebook:return lt.removeOne(e.payload.id,t);case c.DeleteNotebooks:return lt.removeMany(e.payload.ids,t);case c.LoadNotebooks:return lt.addAll(e.payload.notebooks,t);case c.ClearNotebooks:return lt.removeAll(t);default:return t}}const pt=Object(I.o)("notes"),ht=rt({sortComparer:function(t,e){return new Date(e.lastModifiedOn).getTime()-new Date(t.lastModifiedOn).getTime()}}),ft=ht.getInitialState({spinner:{},spinnerAll:!1});function mt(t=ft,e){switch(e.type){case q.FetchNotesByNotebookIdApiCall:return Object.assign(Object.assign({},t),{spinner:Object.assign(Object.assign({},t.spinner),{[e.payload.notebookId]:!0})});case q.FetchNotesByNotebookIdFailure:case q.FetchNotesByNotebookIdSuccess:return Object.assign(Object.assign({},t),{spinner:Object.assign(Object.assign({},t.spinner),{[e.payload.notebookId]:!1})});case q.FetchAllNotesApiCall:return Object.assign(Object.assign({},t),{spinnerAll:!0});case q.FetchAllNotesFailure:case q.FetchAllNotesSuccess:return Object.assign(Object.assign({},t),{spinnerAll:!1});case q.AddNote:return ht.addOne(e.payload.note,t);case q.UpsertNote:return ht.upsertOne(e.payload.note,t);case q.AddNotes:return ht.addMany(e.payload.notes,t);case q.UpsertNotes:return ht.upsertMany(e.payload.notes,t);case q.UpdateNote:return ht.updateOne(e.payload.note,t);case q.UpdateNotes:return ht.updateMany(e.payload.notes,t);case q.DeleteNote:return ht.removeOne(e.payload.id,t);case q.DeleteNotes:return ht.removeMany(e.payload.predicate,t);case q.LoadNotes:return ht.addAll(e.payload.notes,t);case q.ClearNotes:return ht.removeAll(t);default:return t}}const{selectAll:gt}=ht.getSelectors(),kt=Object(I.p)(pt,(t,e)=>{const o=t.spinner[e.notebookId];return void 0!==o&&o}),Nt=Object(I.p)(pt,gt),yt=Object(I.p)(Nt,(t,e)=>t.filter(t=>t.notebookId.toString()===e.notebookId)),Ot=Object(I.p)(Nt,(t,e)=>{const o=t.filter(t=>t.notebookId.toString()===e.notebookId&&t.id.toString()===e.noteId);return 1===o.length?o[0]:null}),{selectIds:Ct,selectEntities:It,selectAll:jt}=lt.getSelectors(),wt=Object(I.p)(bt,t=>t.relevance),vt=Object(I.p)(bt,t=>t.spinner),Ut=Object(I.p)(bt,t=>t.searchMode),xt=Object(I.p)(bt,t=>t.searchQuery),At=Object(I.p)(bt,jt),Tt=Object(I.p)(bt,It),Bt=Object(I.p)(bt,Ct),Ft=Object(I.p)(Tt,(t,e)=>t[e.notebookId]),Mt=Object(I.p)(Nt,t=>{const e={};return t.forEach(t=>{const o=t.notebookId,n=e[o];e[o]=void 0===n?1:n+1}),e}),$t=Object(I.p)(Mt,At,(t,e)=>{const o={};return e.forEach(e=>{const n=e.id,s=e.size;o[n]=0===s&&void 0===t[n]||s===t[n]}),o}),St=Object(I.p)($t,Bt,(t,e)=>{for(const o of e)if(!0!==t[o])return!1;return!0}),Pt=Object(I.p)(xt,t=>{const e=t.replace(/ {2,}/g," ").trim();return""===e?null:[...new Set(e.toLocaleLowerCase().split(" "))]}),Rt=Object(I.p)(At,Ut,Pt,(t,e,o)=>{if(!1===e||null===o)return t;for(const n of o)t=t.filter(t=>t.name.toLowerCase().includes(n));return t.slice(0,100)}),Dt=Object(I.p)(Nt,Ut,Pt,(t,e,o)=>{if(!1===e||null===o)return[];for(const n of o)t=t.filter(t=>t.title.toLowerCase().includes(n)||t.text.toLowerCase().includes(n));return t.slice(0,100)});var qt=o("Wp6s"),Lt=o("NFeN"),_t=o("XiUz"),zt=o("Qu3c"),Et=o("Xa2L"),Qt=o("STbY"),Gt=o("MutI"),Yt=o("znSr"),Vt=o("ihCf");let Wt=(()=>{class t{constructor(t,e,o){this.fb=t,this.dialogRef=e,this.data=o}ngOnInit(){this.form=this.fb.group({titleInput:[this.data.titleCurrent,[]],textInput:[this.data.textCurrent,[]]})}confirm(){this.dialogRef.close({newTitle:this.form.value.titleInput,newText:this.form.value.textInput})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(x.c),C.Ob(U.g),C.Ob(U.a))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-note-dialog"]],decls:12,vars:6,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","formControlName","titleInput",3,"placeholder"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10","formControlName","textInput",3,"placeholder"],["align","end"],["mat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(C.Ub(0,"h2",0),C.Bc(1),C.Tb(),C.Ub(2,"mat-dialog-content",1),C.Ub(3,"mat-form-field"),C.Pb(4,"input",2),C.Tb(),C.Ub(5,"mat-form-field"),C.Pb(6,"textarea",3),C.Tb(),C.Tb(),C.Ub(7,"mat-dialog-actions",4),C.Ub(8,"button",5),C.cc("click",(function(t){return e.close()})),C.Bc(9),C.Tb(),C.Ub(10,"button",5),C.cc("click",(function(t){return e.confirm()})),C.Bc(11),C.Tb(),C.Tb()),2&t&&(C.Cb(1),C.Cc(e.data.title),C.Cb(1),C.nc("formGroup",e.form),C.Cb(2),C.nc("placeholder",e.data.titlePlaceholder),C.Cb(2),C.nc("placeholder",e.data.textPlaceholder),C.Cb(3),C.Cc(e.data.cancelButton),C.Cb(2),C.Cc(e.data.confirmButton))},directives:[U.h,U.e,x.m,x.g,A.b,T.a,x.b,x.l,x.e,Vt.b,U.d,B.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var Xt=o("Rn6e");let Jt=(()=>{class t{constructor(t,e){this.dialog=t,this.store=e,this.add=new C.o}ngOnInit(){}openCreateNoteDialog(){this.dialog.open(Wt,{data:{title:`Create a note in [${this.notebook.name}]`,titlePlaceholder:"Note title",titleCurrent:"",textPlaceholder:"Note content",textCurrent:"",cancelButton:"Cancel",confirmButton:"Create"}}).afterClosed().pipe(Object(R.a)(t=>void 0!==t),Object(D.a)(t=>this.store.dispatch(new W({note:{title:t.newTitle,text:t.newText,notebookId:this.notebook.id}})))).subscribe()}openEditDialog(){this.dialog.open(F,{data:{title:"Rename the notebook",namePlaceholder:"New name",nameCurrent:this.notebook.name,cancelButton:"Cancel",confirmButton:"Rename"}}).afterClosed().pipe(Object(R.a)(t=>void 0!==t&&t.newName!==this.notebook.name),Object(D.a)(t=>this.store.dispatch(new d({id:this.notebook.id.toString(),notebook:{name:t.newName}})))).subscribe()}openDeleteDialog(){this.dialog.open(Xt.a,{data:{title:"Delete notebook?",message:`Notebook [${this.notebook.name}] and [${this.notebook.size}] contained notes will be deleted`,cancelButton:"Cancel",confirmButton:"Delete"},autoFocus:!1}).afterClosed().pipe(Object(R.a)(t=>!0===t),Object(D.a)(()=>this.store.dispatch(new u({id:this.notebook.id.toString()})))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(U.c),C.Ob(I.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notebook-operations-menu"]],inputs:{notebook:"notebook"},outputs:{add:"add"},decls:20,vars:1,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["color","warn"]],template:function(t,e){if(1&t&&(C.Ub(0,"button",0),C.Ub(1,"mat-icon"),C.Bc(2,"more_vert"),C.Tb(),C.Tb(),C.Ub(3,"mat-menu",null,1),C.Ub(5,"button",2),C.cc("click",(function(t){return e.openCreateNoteDialog()})),C.Ub(6,"mat-icon",3),C.Bc(7,"note_add"),C.Tb(),C.Ub(8,"span"),C.Bc(9,"Add a note"),C.Tb(),C.Tb(),C.Ub(10,"button",2),C.cc("click",(function(t){return e.openEditDialog()})),C.Ub(11,"mat-icon",3),C.Bc(12,"edit"),C.Tb(),C.Ub(13,"span"),C.Bc(14,"Rename"),C.Tb(),C.Tb(),C.Ub(15,"button",2),C.cc("click",(function(t){return e.openDeleteDialog()})),C.Ub(16,"mat-icon",4),C.Bc(17,"clear"),C.Tb(),C.Ub(18,"span"),C.Bc(19,"Delete"),C.Tb(),C.Tb(),C.Tb()),2&t){const t=C.sc(4);C.nc("matMenuTriggerFor",t)}},directives:[B.b,Qt.c,Lt.a,Qt.d,Qt.a],styles:[""]}),t})();const Kt=function(t){return[t,"notes"]},Ht=function(t){return{"nb-fetched":t}};function Zt(t,e){if(1&t&&(C.Ub(0,"div",2),C.Ub(1,"a",3),C.Ub(2,"mat-icon",4),C.Bc(3,"folder"),C.Tb(),C.Ub(4,"span",5),C.Bc(5),C.Tb(),C.Ub(6,"span",6),C.hc(7,"async"),C.Bc(8),C.Tb(),C.Tb(),C.Pb(9,"app-notebook-operations-menu",7),C.Tb()),2&t){const t=e.$implicit,o=C.gc(2);C.Cb(1),C.nc("routerLink",C.pc(7,Kt,t.id)),C.Cb(4),C.Cc(t.size),C.Cb(1),C.nc("ngClass",C.pc(9,Ht,C.ic(7,5,o.notebooksConsistency$)[t.id])),C.Cb(2),C.Cc(t.name),C.Cb(1),C.nc("notebook",t)}}function te(t,e){if(1&t&&(C.Ub(0,"mat-nav-list"),C.Ac(1,Zt,10,11,"div",1),C.hc(2,"async"),C.Tb()),2&t){const t=C.gc();C.Cb(1),C.nc("ngForOf",C.ic(2,1,t.notebooks$))}}let ee=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notebooks-nav-list"]],inputs:{notebooks$:"notebooks$",notebooksConsistency$:"notebooksConsistency$"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","","fxLayoutAlign","space-between center",4,"ngFor","ngForOf"],["fxLayout","","fxLayoutAlign","space-between center"],["mat-list-item","",3,"routerLink"],["mat-list-icon","","color","primary",1,"icon-mb"],[1,"nb-size"],[1,"nb-item",3,"ngClass"],[1,"icon-mb",3,"notebook"]],template:function(t,e){1&t&&(C.Ac(0,te,3,3,"mat-nav-list",0),C.hc(1,"async")),2&t&&C.nc("ngIf",C.ic(1,1,e.notebooks$).length)},directives:[n.l,Gt.e,n.k,_t.c,_t.b,Gt.c,s.g,Lt.a,Gt.b,n.j,Yt.a,Jt],pipes:[n.b],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto}.nb-item[_ngcontent-%COMP%]{text-align:left;margin:16px 0 16px 16px}.nb-fetched[_ngcontent-%COMP%]{font-weight:500}.nb-size[_ngcontent-%COMP%]{position:absolute;left:22px;width:20px;color:#fff;font-size:11px;text-align:center}.icon-mb[_ngcontent-%COMP%]{margin-bottom:2px}"]}),t})();var oe=o("QibW");function ne(t,e){if(1&t){const t=C.Vb();C.Ub(0,"mat-list-item",6),C.Ub(1,"mat-radio-button",7),C.cc("change",(function(e){return C.uc(t),C.gc().selection=e.value})),C.Bc(2),C.Tb(),C.Tb()}if(2&t){const t=e.$implicit,o=C.gc();C.Cb(1),C.nc("checked",t.id===o.data.currentNbId)("value",t.id),C.Cb(1),C.Dc(" ",t.name," ")}}let se=(()=>{class t{constructor(t,e,o){this.store=t,this.dialogRef=e,this.notebooks$=this.store.select(At),this.data=o,this.selection=o.currentNbId}ngOnInit(){}confirm(){this.dialogRef.close({nbId:this.selection})}close(){this.dialogRef.close()}notChanged(){return this.selection===this.data.currentNbId}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(I.h),C.Ob(U.g),C.Ob(U.a))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-note-move-dialog"]],decls:11,vars:7,consts:[["mat-dialog-title",""],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["role","listitem"],["color","primary",3,"checked","value","change"]],template:function(t,e){1&t&&(C.Ub(0,"h2",0),C.Bc(1),C.Tb(),C.Ub(2,"mat-dialog-content"),C.Ub(3,"mat-list",1),C.Ac(4,ne,3,3,"mat-list-item",2),C.hc(5,"async"),C.Tb(),C.Tb(),C.Ub(6,"mat-dialog-actions",3),C.Ub(7,"button",4),C.cc("click",(function(t){return e.close()})),C.Bc(8),C.Tb(),C.Ub(9,"button",5),C.cc("click",(function(t){return e.confirm()})),C.Bc(10),C.Tb(),C.Tb()),2&t&&(C.Cb(1),C.Cc(e.data.title),C.Cb(3),C.nc("ngForOf",C.ic(5,5,e.notebooks$)),C.Cb(4),C.Cc(e.data.cancelButton),C.Cb(1),C.nc("disabled",e.notChanged()),C.Cb(1),C.Cc(e.data.confirmButton))},directives:[U.h,U.e,Gt.a,n.k,U.d,B.b,Gt.c,oe.a],pipes:[n.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})(),ce=(()=>{class t{constructor(t,e){this.dialog=t,this.store=e}ngOnInit(){}openDeleteDialog(){this.dialog.open(Xt.a,{data:{title:"Delete note?",message:`Note [${this.note.title}] will be deleted`,cancelButton:"Cancel",confirmButton:"Delete"},autoFocus:!1}).afterClosed().pipe(Object(R.a)(t=>!0===t),Object(D.a)(()=>this.store.dispatch(new J({id:this.note.id.toString(),notebookId:this.note.notebookId.toString()})))).subscribe()}openEditDialog(){this.dialog.open(Wt,{data:{title:"Edit the note",titlePlaceholder:"Note title",titleCurrent:this.note.title,textPlaceholder:"Note content",textCurrent:this.note.text,cancelButton:"Cancel",confirmButton:"Update"}}).afterClosed().pipe(Object(R.a)(t=>void 0!==t),Object(D.a)(t=>this.store.dispatch(new X({id:this.note.id.toString(),currentNbId:this.note.notebookId,note:{title:t.newTitle,text:t.newText,notebookId:this.note.notebookId}})))).subscribe()}openMoveDialog(){this.dialog.open(se,{data:{title:`Move the note [${this.note.title}] to a notebook:`,currentNbId:this.note.notebookId,cancelButton:"Cancel",confirmButton:"Move"},autoFocus:!1}).afterClosed().pipe(Object(R.a)(t=>void 0!==t),Object(D.a)(t=>this.store.dispatch(new X({id:this.note.id.toString(),currentNbId:this.note.notebookId,note:{title:this.note.title,text:this.note.text,notebookId:t.nbId}})))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(U.c),C.Ob(I.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-note-operations-menu"]],inputs:{note:"note"},decls:20,vars:1,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["color","warn"]],template:function(t,e){if(1&t&&(C.Ub(0,"button",0),C.Ub(1,"mat-icon"),C.Bc(2,"more_vert"),C.Tb(),C.Tb(),C.Ub(3,"mat-menu",null,1),C.Ub(5,"button",2),C.cc("click",(function(t){return e.openEditDialog()})),C.Ub(6,"mat-icon",3),C.Bc(7,"edit"),C.Tb(),C.Ub(8,"span"),C.Bc(9,"Edit"),C.Tb(),C.Tb(),C.Ub(10,"button",2),C.cc("click",(function(t){return e.openMoveDialog()})),C.Ub(11,"mat-icon",3),C.Bc(12,"find_replace"),C.Tb(),C.Ub(13,"span"),C.Bc(14,"Move"),C.Tb(),C.Tb(),C.Ub(15,"button",2),C.cc("click",(function(t){return e.openDeleteDialog()})),C.Ub(16,"mat-icon",4),C.Bc(17,"clear"),C.Tb(),C.Ub(18,"span"),C.Bc(19,"Delete"),C.Tb(),C.Tb(),C.Tb()),2&t){const t=C.sc(4);C.nc("matMenuTriggerFor",t)}},directives:[B.b,Qt.c,Lt.a,Qt.d,Qt.a],styles:[""]}),t})();var ie=o("VNUq");function ae(t,e){if(1&t){const t=C.Vb();C.Ub(0,"button",10),C.cc("click",(function(e){return C.uc(t),C.gc(3).unHighlight()})),C.Ub(1,"mat-icon"),C.Bc(2,"highlight_off"),C.Tb(),C.Tb()}}const re=function(t,e){return[t,"notes",e]},be=function(t){return[t]};function le(t,e){if(1&t&&(C.Ub(0,"div",2),C.hc(1,"async"),C.Ub(2,"a",3),C.Ub(3,"mat-icon",4),C.Bc(4,"description"),C.Tb(),C.Ub(5,"div",5),C.Ub(6,"div",6),C.Bc(7),C.Tb(),C.Ub(8,"div"),C.Bc(9),C.Tb(),C.Ub(10,"div",7),C.Bc(11),C.hc(12,"dateTimeFormat"),C.Tb(),C.Tb(),C.Tb(),C.Ac(13,ae,3,0,"button",8),C.hc(14,"async"),C.Pb(15,"app-note-operations-menu",9),C.Tb()),2&t){const t=e.$implicit,o=C.gc(2);C.Fb("mat-elevation-z3","n"+t.id===C.ic(1,9,o.fragment$)),C.nc("id","n"+t.id),C.Cb(2),C.nc("routerLink",o.isSearchContext?C.qc(15,re,t.notebookId,t.id):C.pc(18,be,t.id)),C.Cb(5),C.Cc(t.title),C.Cb(2),C.Cc(t.text),C.Cb(2),C.Cc(C.ic(12,11,t.lastModifiedOn)),C.Cb(2),C.nc("ngIf","n"+t.id===C.ic(14,13,o.fragment$)),C.Cb(2),C.nc("note",t)}}function de(t,e){if(1&t&&(C.Ub(0,"mat-nav-list"),C.Ac(1,le,16,20,"div",1),C.hc(2,"async"),C.Tb()),2&t){const t=C.gc();C.Cb(1),C.nc("ngForOf",C.ic(2,1,t.notes$))}}let ue=(()=>{class t{constructor(t,e,o){this.route=t,this.router=e,this.location=o,this.fragment$=this.route.fragment,this.pathWithoutFragment=this.location.path(!1),this.isSearchContext=!this.pathWithoutFragment.endsWith("notes")}ngOnInit(){}unHighlight(){this.router.navigate([this.pathWithoutFragment])}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(s.a),C.Ob(s.f),C.Ob(n.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notes-nav-list"]],inputs:{notes$:"notes$"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","","fxLayoutAlign","space-between center",3,"mat-elevation-z3","id",4,"ngFor","ngForOf"],["fxLayout","","fxLayoutAlign","space-between center",3,"id"],["mat-list-item","",3,"routerLink"],["mat-list-icon","","color","primary",1,"icon-mb"],[1,"nb-item"],[1,"nb-title"],[1,"nb-time"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"icon-mb",3,"note"],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(C.Ac(0,de,3,3,"mat-nav-list",0),C.hc(1,"async")),2&t&&C.nc("ngIf",C.ic(1,1,e.notes$).length)},directives:[n.l,Gt.e,n.k,_t.c,_t.b,Gt.c,s.g,Lt.a,Gt.b,ce,B.b],pipes:[n.b,ie.a],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto}.nb-item[_ngcontent-%COMP%]{text-align:left;margin:16px 0 16px 16px}.nb-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.nb-time[_ngcontent-%COMP%]{font-size:12px}.icon-mb[_ngcontent-%COMP%]{margin-bottom:2px}"]}),t})();const pe=["search"];function he(t,e){if(1&t){const t=C.Vb();C.Ub(0,"div"),C.Ub(1,"mat-form-field",5),C.Ub(2,"button",6),C.Ub(3,"mat-icon",7),C.Bc(4,"search"),C.Tb(),C.Tb(),C.Ub(5,"input",8,9),C.cc("ngModelChange",(function(e){return C.uc(t),C.gc().searchQuery=e}))("ngModelChange",(function(e){return C.uc(t),C.gc().searchQueryChanged.next(e)})),C.Tb(),C.Ub(7,"button",10),C.cc("click",(function(e){return C.uc(t),C.gc().disableSearch()})),C.Ub(8,"mat-icon"),C.Bc(9,"close"),C.Tb(),C.Tb(),C.Tb(),C.Tb()}if(2&t){const t=C.gc();C.Cb(5),C.nc("ngModel",t.searchQuery)}}function fe(t,e){if(1&t){const t=C.Vb();C.Ub(0,"div",11),C.Ub(1,"button",12),C.cc("click",(function(e){return C.uc(t),C.gc().openCreateNotebookDialog()})),C.Ub(2,"mat-icon"),C.Bc(3,"create_new_folder"),C.Tb(),C.Tb(),C.Ub(4,"h1",13),C.Bc(5,"All notebooks"),C.Tb(),C.Ub(6,"button",12),C.cc("click",(function(e){return C.uc(t),C.gc().enableSearch()})),C.Ub(7,"mat-icon"),C.Bc(8,"search"),C.Tb(),C.Tb(),C.Tb()}2&t&&(C.Cb(1),C.nc("matTooltip","Create a notebook"),C.Cb(5),C.nc("matTooltip","Open the search bar"))}function me(t,e){1&t&&C.Pb(0,"mat-spinner",14)}function ge(t,e){if(1&t){const t=C.Vb();C.Ub(0,"div"),C.Ub(1,"button",15),C.cc("click",(function(e){return C.uc(t),C.gc().openCreateNotebookDialog()})),C.Ub(2,"mat-icon",16),C.Bc(3,"create_new_folder"),C.Tb(),C.Ub(4,"span"),C.Bc(5,"Create a notebook"),C.Tb(),C.Tb(),C.Tb()}}function ke(t,e){if(1&t&&C.Pb(0,"app-notebooks-nav-list",17),2&t){const t=C.gc();C.nc("notebooks$",t.notebooks$)("notebooksConsistency$",t.notebooksConsistency$)}}function Ne(t,e){if(1&t&&C.Pb(0,"app-notes-nav-list",18),2&t){const t=C.gc();C.nc("notes$",t.notesFilter$)}}function ye(t,e){if(1&t&&(C.Ub(0,"div",3),C.Ub(1,"a",4),C.Ub(2,"mat-icon"),C.Bc(3,"arrow_back"),C.Tb(),C.Tb(),C.Ub(4,"h1",5),C.Bc(5),C.Tb(),C.Pb(6,"app-notebook-operations-menu",6),C.Tb()),2&t){const t=e.ngIf;C.Cb(1),C.nc("routerLink","../.."),C.Cb(4),C.Cc(t.name),C.Cb(1),C.nc("notebook",t)}}function Oe(t,e){1&t&&C.Pb(0,"mat-spinner",7)}function Ce(t,e){if(1&t&&C.Pb(0,"app-notes-nav-list",8),2&t){const t=C.gc();C.nc("notes$",t.notes$)}}function Ie(t,e){if(1&t&&(C.Ub(0,"mat-card-subtitle"),C.Bc(1),C.hc(2,"dateTimeFormat"),C.Tb()),2&t){const t=C.gc(2);C.Cb(1),C.Cc(C.ic(2,1,t.currentNote.lastModifiedOn))}}function je(t,e){if(1&t&&(C.Ub(0,"mat-card-header"),C.Ub(1,"mat-icon",4),C.Bc(2,"description"),C.Tb(),C.Ub(3,"mat-card-title"),C.Bc(4),C.Tb(),C.Ac(5,Ie,3,3,"mat-card-subtitle",0),C.Tb()),2&t){const t=e.ngIf,o=C.gc();C.Cb(4),C.Cc(t.name),C.Cb(1),C.nc("ngIf",o.currentNote)}}function we(t,e){1&t&&C.Pb(0,"mat-spinner",5)}function ve(t,e){if(1&t&&(C.Ub(0,"form",6),C.Ub(1,"mat-form-field",7),C.Ub(2,"mat-label"),C.Bc(3,"Note title"),C.Tb(),C.Pb(4,"input",8),C.Tb(),C.Ub(5,"mat-form-field",7),C.Ub(6,"mat-label"),C.Bc(7,"Note content"),C.Tb(),C.Pb(8,"textarea",9),C.Tb(),C.Tb()),2&t){const t=C.gc();C.nc("formGroup",t.form)}}function Ue(t,e){if(1&t){const t=C.Vb();C.Ub(0,"mat-card-actions",10),C.Ub(1,"button",11),C.cc("click",(function(e){return C.uc(t),C.gc().goBack()})),C.Bc(2,"Go back"),C.Tb(),C.Ub(3,"a",12),C.Bc(4,"Show in notebook"),C.Tb(),C.Ub(5,"button",13),C.cc("click",(function(e){return C.uc(t),C.gc().updateNote()})),C.Bc(6,"Save"),C.Tb(),C.Tb()}if(2&t){const t=C.gc();C.Cb(3),C.nc("routerLink","..")("fragment","n"+t.id),C.Cb(2),C.nc("disabled",t.notChanged())}}const xe=[{path:"",component:w,children:[{path:"",pathMatch:"full",component:(()=>{class t{constructor(t,e,o){this.store=t,this.dialog=e,this.cd=o,this.notebooks$=this.store.select(Rt),this.notesFilter$=this.store.select(Dt),this.spinner$=this.store.select(vt),this.notebooksConsistency$=this.store.select($t),this.searchMode$=this.store.select(Ut),this.searchQueryChanged=new v.a}ngOnInit(){this.store.select(xt).pipe(Object(M.a)(1),Object($.a)(t=>this.searchQuery=t)).subscribe(),this.searchQueryChanged.pipe(Object(S.a)(300),Object(P.a)(),Object($.a)(t=>this.store.dispatch(new m({searchQuery:t})))).subscribe()}openCreateNotebookDialog(){this.dialog.open(F,{data:{title:"Create a notebook",namePlaceholder:"Notebook name",nameCurrent:"",cancelButton:"Cancel",confirmButton:"Create"}}).afterClosed().pipe(Object(R.a)(t=>void 0!==t),Object(D.a)(t=>this.store.dispatch(new l({notebook:{name:t.newName}})))).subscribe()}enableSearch(){this.store.dispatch(new h),this.cd.detectChanges(),this.searchElement.nativeElement.focus(),this.store.dispatch(new Q)}disableSearch(){this.store.dispatch(new f)}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(I.h),C.Ob(U.c),C.Ob(C.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notebooks-list"]],viewQuery:function(t,e){var o;1&t&&C.Fc(pe,!0),2&t&&C.rc(o=C.dc())&&(e.searchElement=o.first)},decls:17,vars:26,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["style","margin:0 auto",4,"ngIf"],[3,"notebooks$","notebooksConsistency$",4,"ngIf"],[3,"notes$",4,"ngIf"],["floatLabel","never"],["mat-button","","disabled","","matPrefix",""],["matPrefix",""],["matInput","","type","text",3,"ngModel","ngModelChange"],["search",""],["mat-icon-button","","matSuffix","",2,"margin-right","8px",3,"click"],["fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","","color","primary","fxFlex","0 0 auto",3,"matTooltip","click"],["fxFlex","1 1 100%"],[2,"margin","0 auto"],["mat-menu-item","",3,"click"],["color","primary"],[3,"notebooks$","notebooksConsistency$"],[3,"notes$"]],template:function(t,e){1&t&&(C.Ub(0,"mat-card"),C.Ac(1,he,10,1,"div",0),C.hc(2,"async"),C.Ac(3,fe,9,2,"div",1),C.hc(4,"async"),C.hc(5,"async"),C.hc(6,"async"),C.Ac(7,me,1,0,"mat-spinner",2),C.hc(8,"async"),C.Ac(9,ge,6,0,"div",0),C.hc(10,"async"),C.hc(11,"async"),C.hc(12,"async"),C.Ac(13,ke,1,2,"app-notebooks-nav-list",3),C.hc(14,"async"),C.Ac(15,Ne,1,1,"app-notes-nav-list",4),C.hc(16,"async"),C.Tb()),2&t&&(C.Cb(1),C.nc("ngIf",C.ic(2,6,e.searchMode$)),C.Cb(2),C.nc("ngIf",C.ic(4,8,e.notebooks$).length&&!C.ic(5,10,e.spinner$)&&!C.ic(6,12,e.searchMode$)),C.Cb(4),C.nc("ngIf",C.ic(8,14,e.spinner$)),C.Cb(2),C.nc("ngIf",!C.ic(10,16,e.spinner$)&&!C.ic(11,18,e.searchMode$)&&!C.ic(12,20,e.notebooks$).length),C.Cb(4),C.nc("ngIf",!C.ic(14,22,e.spinner$)),C.Cb(2),C.nc("ngIf",C.ic(16,24,e.searchMode$)))},directives:[qt.a,n.l,A.b,B.b,A.f,Lt.a,T.a,x.b,x.l,x.o,A.g,_t.c,_t.b,_t.a,zt.a,Et.b,Qt.a,ee,ue],pipes:[n.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}mat-card[_ngcontent-%COMP%]{margin:16px;min-width:270px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:300;letter-spacing:-.5px;margin:16px;text-align:center}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})()},{path:":id/notes",pathMatch:"full",component:(()=>{class t{constructor(t,e){this.store=t,this.route=e,this.nbId=this.route.snapshot.paramMap.get("id"),this.notebook$=this.store.select(Ft,{notebookId:this.nbId}),this.notes$=this.store.select(yt,{notebookId:this.nbId}),this.spinner$=this.store.select(kt,{notebookId:this.nbId})}ngOnInit(){this.store.dispatch(new L({notebookId:this.nbId.toString()}))}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(I.h),C.Ob(s.a))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-notes-list"]],decls:7,vars:9,consts:[["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["style","margin:0 auto;",4,"ngIf"],[3,"notes$",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center"],["mat-button","","fxFlex","0 0 auto",3,"routerLink"],["fxFlex","1 1 100%"],["fxFlex","0 0 auto",1,"icon-mb",3,"notebook"],[2,"margin","0 auto"],[3,"notes$"]],template:function(t,e){1&t&&(C.Ub(0,"mat-card"),C.Ac(1,ye,7,3,"div",0),C.hc(2,"async"),C.Ac(3,Oe,1,0,"mat-spinner",1),C.hc(4,"async"),C.Ac(5,Ce,1,1,"app-notes-nav-list",2),C.hc(6,"async"),C.Tb()),2&t&&(C.Cb(1),C.nc("ngIf",C.ic(2,3,e.notebook$)),C.Cb(2),C.nc("ngIf",C.ic(4,5,e.spinner$)),C.Cb(2),C.nc("ngIf",!C.ic(6,7,e.spinner$)))},directives:[qt.a,n.l,_t.c,_t.b,B.a,s.g,_t.a,Lt.a,Jt,Et.b,ue],pipes:[n.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}mat-card[_ngcontent-%COMP%]{margin:16px;min-width:270px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:300;letter-spacing:-.5px;margin:16px;text-align:center}"]}),t})()},{path:":id/notes/:noteId",pathMatch:"full",component:(()=>{class t{constructor(t,e,o,n){this.store=t,this.fb=e,this.route=o,this.location=n,this.nbId=this.route.snapshot.paramMap.get("id"),this.id=this.route.snapshot.paramMap.get("noteId"),this.notebook$=this.store.select(Ft,{notebookId:this.nbId}),this.spinner$=this.store.select(kt,{notebookId:this.nbId})}ngOnInit(){this.store.dispatch(new L({notebookId:this.nbId.toString()})),this.store.select(Ot,{notebookId:this.nbId,noteId:this.id}).pipe(Object(R.a)(t=>null!==t),Object($.a)(t=>{this.form=this.fb.group({titleInput:[t.title,[]],textInput:[t.text,[]]}),this.currentNote=t})).subscribe()}updateNote(){this.store.dispatch(new X({id:this.currentNote.id.toString(),currentNbId:this.currentNote.notebookId,note:{title:this.form.value.titleInput,text:this.form.value.textInput,notebookId:this.currentNote.notebookId}}))}notChanged(){return this.currentNote.title===this.form.value.titleInput&&this.currentNote.text===this.form.value.textInput}goBack(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(I.h),C.Ob(x.c),C.Ob(s.a),C.Ob(n.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-note-card"]],decls:7,vars:8,consts:[[4,"ngIf"],["style","margin:0 auto;",4,"ngIf"],[3,"formGroup",4,"ngIf"],["align","end",4,"ngIf"],["mat-card-avatar","","color","primary"],[2,"margin","0 auto"],[3,"formGroup"],["appearance","outline"],["matInput","","placeholder","Note title","formControlName","titleInput"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10","placeholder","Note content","formControlName","textInput"],["align","end"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink","fragment"],["mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(C.Ub(0,"mat-card"),C.Ac(1,je,6,2,"mat-card-header",0),C.hc(2,"async"),C.Ac(3,we,1,0,"mat-spinner",1),C.hc(4,"async"),C.Ac(5,ve,9,1,"form",2),C.Ac(6,Ue,7,3,"mat-card-actions",3),C.Tb()),2&t&&(C.Cb(1),C.nc("ngIf",C.ic(2,4,e.notebook$)),C.Cb(2),C.nc("ngIf",C.ic(4,6,e.spinner$)),C.Cb(2),C.nc("ngIf",e.form),C.Cb(1),C.nc("ngIf",e.form))},directives:[qt.a,n.l,qt.e,Lt.a,qt.c,qt.h,qt.g,Et.b,x.r,x.m,x.g,A.b,A.e,T.a,x.b,x.l,x.e,Vt.b,qt.b,B.b,B.a,s.g],pipes:[n.b,ie.a],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}mat-card[_ngcontent-%COMP%]{margin:16px;min-width:270px}mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})()}]}];let Ae=(()=>{class t{}return t.\u0275mod=C.Mb({type:t}),t.\u0275inj=C.Lb({factory:function(e){return new(e||t)},imports:[[s.h.forChild(xe)],s.h]}),t})();var Te=o("YUcS"),Be=o("vvyD"),Fe=o("snw9"),Me=o("zp1y"),$e=o("XqQ8"),Se=o("JIr8"),Pe=o("bOdf"),Re=o("MrWr"),De=o("4MDz"),qe=o("LRne"),Le=o("EY2u");function _e(t){return{id:t.id,name:t.name,size:t.size}}var ze=o("bUwk"),Ee=o("zkEj");let Qe=(()=>{class t{constructor(t,e,o,n){this.actions$=t,this.http=e,this.store=o,this.snackBar=n,this.fetchAllNotebooksRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(c.FetchAllNotebooksRequest),Object(Me.a)(this.store.select(wt)),Object(Me.a)(this.store.select(Re.b),([t,e],o)=>{return{relevance:e,newRelevance:(n=o.userId,{userId:n,timestamp:(new Date).getTime()})};var n}),Object(R.a)(t=>null===t.relevance||t.relevance.userId!==t.newRelevance.userId),Object($.a)(()=>this.store.dispatch(new O)),Object($.a)(()=>this.store.dispatch(new nt)),Object($.a)(()=>this.store.dispatch(new a)),Object($e.a)(t=>this.http.getAllNotebooks().pipe(Object(D.a)(e=>new r({response:e,relevance:t.newRelevance})),Object(Se.a)(t=>Object(qe.a)(new b({message:Object(De.b)(t,"Failed to get all notebooks")}))))))),this.fetchAllNotebooksSuccess$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(c.FetchAllNotebooksSuccess),Object(D.a)(t=>{const e=t.payload.response.map(t=>_e(t));return new g({notebooks:e})}))),this.fetchAllNotebooksFailure$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(c.FetchAllNotebooksFailure),Object($.a)(t=>this.snackBar.openError(t.payload.message))),{dispatch:!1}),this.createNotebookRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(c.CreateNotebookRequest),Object($e.a)(t=>this.http.createNotebook(t.payload.notebook).pipe(Object(D.a)(t=>new k({notebook:_e(t)})),Object(Se.a)(t=>(this.snackBar.openError(Object(De.b)(t,"Failed to create notebook")),Le.a)))))),this.updateNotebookRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(c.UpdateNotebookRequest),Object($e.a)(t=>this.http.updateNotebook(t.payload.id,t.payload.notebook).pipe(Object(D.a)(t=>new N({notebook:{id:t.id,changes:t}})),Object(Se.a)(t=>(this.snackBar.openError(Object(De.b)(t,"Failed to update notebook")),Le.a)))))),this.deleteNotebookRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(c.DeleteNotebookRequest),Object($e.a)(t=>this.http.deleteNotebook(t.payload.id).pipe(Object(Pe.a)(()=>[new y({id:t.payload.id}),new ot({predicate:e=>e.notebookId.toString()===t.payload.id})]),Object(Se.a)(t=>(this.snackBar.openError(Object(De.b)(t,"Failed to delete notebook")),Le.a))))))}}return t.\u0275fac=function(e){return new(e||t)(C.Yb(Fe.a),C.Yb(ze.a),C.Yb(I.h),C.Yb(Ee.a))},t.\u0275prov=C.Kb({token:t,factory:t.\u0275fac}),t})();var Ge=o("5+tZ");function Ye(t){return{id:t.id,title:t.title,text:t.text,notebookId:t.notebookId,lastModifiedOn:t.lastModifiedOn}}let Ve=(()=>{class t{constructor(t,e,o,n){this.actions$=t,this.store=e,this.http=o,this.snackBar=n,this.fetchNotesByNotebookRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.FetchNotesByNotebookIdRequest),Object(Me.a)(this.store.select($t),(t,e)=>({notebookId:t.payload.notebookId,notConsistent:!0!==e[t.payload.notebookId]})),Object(R.a)(t=>t.notConsistent),Object($.a)(t=>this.store.dispatch(new _({notebookId:t.notebookId}))),Object(Ge.a)(t=>this.http.getNotesByNotebookId(t.notebookId).pipe(Object(D.a)(e=>new z({response:e,notebookId:t.notebookId})),Object(Se.a)(e=>Object(qe.a)(new E({message:Object(De.b)(e,"Failed to get notes by notebook"),notebookId:t.notebookId}))))))),this.fetchNotesByNotebookSuccess$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.FetchNotesByNotebookIdSuccess),Object(Pe.a)(t=>[new ot({predicate:e=>e.notebookId.toString()===t.payload.notebookId}),new Z({notes:t.payload.response.map(t=>Ye(t))})]))),this.fetchNotesByNotebookFailure$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.FetchNotesByNotebookIdFailure),Object($.a)(t=>this.snackBar.openError(t.payload.message))),{dispatch:!1}),this.fetchAllNotesRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.FetchAllNotesRequest),Object(Me.a)(this.store.select(St),(t,e)=>e),Object(R.a)(t=>!t),Object($.a)(()=>this.store.dispatch(new G)),Object($e.a)(()=>this.http.getAllNotes().pipe(Object(D.a)(t=>new Y({response:t})),Object(Se.a)(t=>Object(qe.a)(new V({message:Object(De.b)(t,"Failed to get all notes")}))))))),this.fetchAllNotesSuccess$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.FetchAllNotesSuccess),Object(D.a)(t=>{const e=t.payload.response.map(t=>Ye(t));return new K({notes:e})}))),this.fetchAllNotesFailure$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.FetchAllNotesFailure),Object($.a)(t=>this.snackBar.openError(t.payload.message))),{dispatch:!1}),this.createNoteRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.CreateNoteRequest),Object($e.a)(t=>this.http.createNote(t.payload.note).pipe(Object($.a)(t=>this.store.dispatch(new p({notebookId:t.notebookId.toString(),sizeDelta:1}))),Object(D.a)(t=>new H({note:Ye(t)})),Object(Se.a)(t=>(this.snackBar.openError(Object(De.b)(t,"Failed to create note")),Le.a)))))),this.updateNoteRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.UpdateNoteRequest),Object($e.a)(t=>this.http.updateNote(t.payload.id,t.payload.note).pipe(Object(D.a)(t=>Ye(t)),Object($.a)(e=>{e.notebookId!==t.payload.currentNbId&&(this.store.dispatch(new p({notebookId:t.payload.currentNbId.toString(),sizeDelta:-1})),this.store.dispatch(new p({notebookId:e.notebookId.toString(),sizeDelta:1})))}),Object(D.a)(t=>new tt({note:{id:t.id,changes:t}})),Object(Se.a)(t=>(this.snackBar.openError(Object(De.b)(t,"Failed to update note")),Le.a)))))),this.deleteNoteRequest$=Object(Fe.c)(()=>this.actions$.pipe(Object(Fe.d)(q.DeleteNoteRequest),Object($e.a)(t=>this.http.deleteNote(t.payload.id).pipe(Object($.a)(()=>this.store.dispatch(new p({notebookId:t.payload.notebookId,sizeDelta:-1}))),Object(D.a)(()=>new et({id:t.payload.id.toString()})),Object(Se.a)(t=>(this.snackBar.openError(Object(De.b)(t,"Failed to delete note")),Le.a))))))}}return t.\u0275fac=function(e){return new(e||t)(C.Yb(Fe.a),C.Yb(I.h),C.Yb(ze.a),C.Yb(Ee.a))},t.\u0275prov=C.Kb({token:t,factory:t.\u0275fac}),t})();var We=o("hI8S"),Xe=o("hID/");o.d(e,"NotebooksModule",(function(){return Je}));let Je=(()=>{class t{}return t.\u0275mod=C.Mb({type:t}),t.\u0275inj=C.Lb({factory:function(e){return new(e||t)},imports:[[Xe.a,We.a,n.c,Te.a,x.h,x.p,Be.a,Ae,Fe.b.forFeature([Qe,Ve]),I.j.forFeature("notebooks",ut),I.j.forFeature("notes",mt)]]}),t})()}}]);