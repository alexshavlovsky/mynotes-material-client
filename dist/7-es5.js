function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],o=!0,i=!1,c=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(s){i=!0,c=s}finally{try{o||null==r.return||r.return()}finally{if(i)throw c}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PiXc:function(t,e,n){"use strict";n.r(e);var o,i,c=n("ofXK"),a=n("tyNb"),r=function(t){return t.FetchAllNotebooksRequest="[Notebooks Container] Fetch All Notebooks Request",t.FetchAllNotebooksApiCall="[Store Cache Core] Fetch All Notebooks API call",t.FetchAllNotebooksSuccess="[API] Fetch All Notebooks Success",t.FetchAllNotebooksFailure="[API] Fetch All Notebooks Failure",t.CreateNotebookRequest="[Notebooks Container] Create Notebook Request",t.UpdateNotebookRequest="[Notebooks Container] Rename Notebook Request",t.DeleteNotebookRequest="[Notebooks Container] Delete Notebook Request",t.InvalidateNotebooksStore="[Notebooks Container/UI] Invalidate Notebooks Store",t.ParentNotebookAtomicUpdate="[Child Note Effect] Parent Notebook Atomic Update",t.SetNotebooksSearchMode="[Notebooks List Page] Set Notebooks search mode",t.ResetNotebooksSearchMode="[Notebooks List Page] Reset Notebooks search mode",t.SearchQueryChange="[Notebooks List Page] Search Query Change",t.LoadNotebooks="[Notebook] Load Notebooks",t.AddNotebook="[Notebook] Add Notebook",t.UpsertNotebook="[Notebook] Upsert Notebook",t.AddNotebooks="[Notebook] Add Notebooks",t.UpsertNotebooks="[Notebook] Upsert Notebooks",t.UpdateNotebook="[Notebook] Update Notebook",t.UpdateNotebooks="[Notebook] Update Notebooks",t.DeleteNotebook="[Notebook] Delete Notebook",t.DeleteNotebooks="[Notebook] Delete Notebooks",t.ClearNotebooks="[Notebook] Clear Notebooks",t}({}),s=function t(){_classCallCheck(this,t),this.type=r.FetchAllNotebooksRequest},l=function t(){_classCallCheck(this,t),this.type=r.FetchAllNotebooksApiCall},u=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.FetchAllNotebooksSuccess},b=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.FetchAllNotebooksFailure},d=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.CreateNotebookRequest},h=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.UpdateNotebookRequest},p=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.DeleteNotebookRequest},f=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.ParentNotebookAtomicUpdate},k=function t(){_classCallCheck(this,t),this.type=r.SetNotebooksSearchMode},m=function t(){_classCallCheck(this,t),this.type=r.ResetNotebooksSearchMode},g=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.SearchQueryChange},y=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.LoadNotebooks},C=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.AddNotebook},N=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.UpdateNotebook},O=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r.DeleteNotebook},v=function t(){_classCallCheck(this,t),this.type=r.ClearNotebooks},I=n("fXoL"),j=n("kt0X"),w=n("8B9z"),A=((o=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.store.dispatch(new s)}}]),t}()).\u0275fac=function(t){return new(t||o)(I.Ob(j.h))},o.\u0275cmp=I.Ib({type:o,selectors:[["app-notebooks-container"]],decls:2,vars:0,template:function(t,e){1&t&&(I.Pb(0,"app-nav-bar"),I.Pb(1,"router-outlet"))},directives:[w.a,a.i],styles:["","[_nghost-%COMP%]{position:absolute;top:56px;bottom:0;left:0;right:0}"]}),o),x=n("XNiG"),U=n("0IaG"),T=n("3Pt+"),_=n("kmnG"),B=n("qFsG"),F=n("bTqV"),M=((i=function(){function t(e,n,o){_classCallCheck(this,t),this.fb=e,this.dialogRef=n,this.data=o}return _createClass(t,[{key:"ngOnInit",value:function(){this.form=this.fb.group({nameInput:[this.data.nameCurrent,[]]})}},{key:"confirm",value:function(){this.dialogRef.close({newName:this.form.value.nameInput})}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||i)(I.Ob(T.c),I.Ob(U.g),I.Ob(U.a))},i.\u0275cmp=I.Ib({type:i,selectors:[["app-notebook-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","formControlName","nameInput",3,"placeholder","keydown.enter"],["align","end"],["mat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(I.Ub(0,"h2",0),I.Bc(1),I.Tb(),I.Ub(2,"mat-dialog-content",1),I.Ub(3,"mat-form-field"),I.Ub(4,"input",2),I.cc("keydown.enter",(function(t){return e.confirm()})),I.Tb(),I.Tb(),I.Tb(),I.Ub(5,"mat-dialog-actions",3),I.Ub(6,"button",4),I.cc("click",(function(t){return e.close()})),I.Bc(7),I.Tb(),I.Ub(8,"button",4),I.cc("click",(function(t){return e.confirm()})),I.Bc(9),I.Tb(),I.Tb()),2&t&&(I.Cb(1),I.Cc(e.data.title),I.Cb(1),I.nc("formGroup",e.form),I.Cb(2),I.nc("placeholder",e.data.namePlaceholder),I.Cb(3),I.Cc(e.data.cancelButton),I.Cb(2),I.Cc(e.data.confirmButton))},directives:[U.h,U.e,T.m,T.g,_.b,B.a,T.b,T.l,T.e,U.d,F.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i),$=n("IzEk"),S=n("vkgz"),P=n("Kj3r"),R=n("/uUt"),D=n("pLZG"),q=n("lJxs"),L=function(t){return t.FetchNotesByNotebookIdRequest="[Notes List Page] Fetch Notes By Notebook Id Request",t.FetchNotesByNotebookIdApiCall="[Store Cache Core] Fetch Notes By Notebook Id API call",t.FetchNotesByNotebookIdSuccess="[API] Fetch Notes By Notebook Id Success",t.FetchNotesByNotebookIdFailure="[API] Fetch Notes By Notebook Id Failure",t.FetchAllNotesRequest="[Notebooks Container] Fetch All Notes Request",t.FetchAllNotesApiCall="[Store Cache Core] Fetch All Notes API call",t.FetchAllNotesSuccess="[API] Fetch All Notes Success",t.FetchAllNotesFailure="[API] Fetch All Notes Failure",t.CreateNoteRequest="[Notebooks Container] Create Note Request",t.UpdateNoteRequest="[Notebooks Container] Update Note Request",t.DeleteNoteRequest="[Notebooks Container] Delete Note Request",t.LoadNotes="[Note] Load Notes",t.AddNote="[Note] Add Note",t.UpsertNote="[Note] Upsert Note",t.AddNotes="[Note] Add Notes",t.UpsertNotes="[Note] Upsert Notes",t.UpdateNote="[Note] Update Note",t.UpdateNotes="[Note] Update Notes",t.DeleteNote="[Note] Delete Note",t.DeleteNotes="[Note] Delete Notes",t.ClearNotes="[Note] Clear Notes",t}({}),E=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.FetchNotesByNotebookIdRequest},z=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.FetchNotesByNotebookIdApiCall},Q=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.FetchNotesByNotebookIdSuccess},G=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.FetchNotesByNotebookIdFailure},W=function t(){_classCallCheck(this,t),this.type=L.FetchAllNotesRequest},Y=function t(){_classCallCheck(this,t),this.type=L.FetchAllNotesApiCall},V=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.FetchAllNotesSuccess},X=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.FetchAllNotesFailure},H=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.CreateNoteRequest},J=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.UpdateNoteRequest},K=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.DeleteNoteRequest},Z=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.LoadNotes},tt=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.AddNote},et=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.UpsertNotes},nt=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.UpdateNote},ot=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.DeleteNote},it=function t(e){_classCallCheck(this,t),this.payload=e,this.type=L.DeleteNotes},ct=function t(){_classCallCheck(this,t),this.type=L.ClearNotes},at=function(){var t={EntitiesOnly:0,Both:1,None:2};return t[t.EntitiesOnly]="EntitiesOnly",t[t.Both]="Both",t[t.None]="None",t}();function rt(t){return function(e,n){var o={ids:_toConsumableArray(n.ids),entities:Object.assign({},n.entities)},i=t(e,o);return i===at.Both?Object.assign({},n,o):i===at.EntitiesOnly?Object.assign({},n,{entities:o.entities}):n}}function st(t,e){var n=e(t);return Object(I.W)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function lt(t){function e(e,n){var o=st(e,t);return o in n.entities?at.None:(n.ids.push(o),n.entities[o]=e,at.Both)}function n(t,n){var o=!1,i=!0,c=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){o=e(r.value,n)!==at.None||o}}catch(l){c=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(c)throw a}}return o?at.Both:at.None}function o(t,e){var n=(t instanceof Array?t:e.ids.filter((function(n){return t(e.entities[n])}))).filter((function(t){return t in e.entities})).map((function(t){return delete e.entities[t]})).length>0;return n&&(e.ids=e.ids.filter((function(t){return t in e.entities}))),n?at.Both:at.None}function i(e,n){var o={};return(e=e.filter((function(t){return t.id in n.entities}))).length>0?e.filter((function(e){return function(e,n,o){var i=Object.assign({},o.entities[n.id],n.changes),c=st(i,t),a=c!==n.id;return a&&(e[n.id]=c,delete o.entities[n.id]),o.entities[c]=i,a}(o,e,n)})).length>0?(n.ids=n.ids.map((function(t){return o[t]||t})),at.Both):at.EntitiesOnly:at.None}function c(e,o){var c=[],a=[],r=!0,s=!1,l=void 0;try{for(var u,b=e[Symbol.iterator]();!(r=(u=b.next()).done);r=!0){var d=u.value,h=st(d,t);h in o.entities?a.push({id:h,changes:d}):c.push(d)}}catch(k){s=!0,l=k}finally{try{r||null==b.return||b.return()}finally{if(s)throw l}}var p=i(a,o),f=n(c,o);switch(!0){case f===at.None&&p===at.None:return at.None;case f===at.Both||p===at.Both:return at.Both;default:return at.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:rt(e),addMany:rt(n),addAll:rt((function(t,e){return e.ids=[],e.entities={},n(t,e),at.Both})),updateOne:rt((function(t,e){return i([t],e)})),updateMany:rt(i),upsertOne:rt((function(t,e){return c([t],e)})),upsertMany:rt(c),removeOne:rt((function(t,e){return o([t],e)})),removeMany:rt(o),map:rt((function(t,e){return i(e.ids.reduce((function(n,o){var i=t(e.entities[o]);return i!==e.entities[o]&&n.push({id:o,changes:i}),n}),[]).filter((function(t){return t.id in e.entities})),e)}))}}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,o=e.sortComparer,i={getInitialState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({ids:[],entities:{}},t)}},c={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},o=Object(j.p)(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),i=Object(j.p)(e,(function(t){return t.length}));return t?{selectIds:Object(j.p)(t,e),selectEntities:Object(j.p)(t,n),selectAll:Object(j.p)(t,o),selectTotal:Object(j.p)(t,i)}:{selectIds:e,selectEntities:n,selectAll:o,selectTotal:i}}},a=o?function(t,e){var n=lt(t);function o(e,n){var o=e.filter((function(e){return!(st(e,t)in n.entities)}));return 0===o.length?at.None:(a(o,n),at.Both)}function i(e,n){var o=[],i=e.filter((function(e){return function(e,n,o){if(!(n.id in o.entities))return!1;var i=Object.assign({},o.entities[n.id],n.changes),c=st(i,t);return delete o.entities[n.id],e.push(i),c!==n.id}(o,e,n)})).length>0;if(0===o.length)return at.None;var c=n.ids,r=[];return n.ids=n.ids.filter((function(t,e){return t in n.entities||(r.push(e),!1)})),a(o,n),!i&&r.every((function(t){return n.ids[t]===c[t]}))?at.EntitiesOnly:at.Both}function c(e,n){var c=[],a=[],r=!0,s=!1,l=void 0;try{for(var u,b=e[Symbol.iterator]();!(r=(u=b.next()).done);r=!0){var d=u.value,h=st(d,t);h in n.entities?a.push({id:h,changes:d}):c.push(d)}}catch(k){s=!0,l=k}finally{try{r||null==b.return||b.return()}finally{if(s)throw l}}var p=i(a,n),f=o(c,n);switch(!0){case f===at.None&&p===at.None:return at.None;case f===at.Both||p===at.Both:return at.Both;default:return at.EntitiesOnly}}function a(n,o){n.sort(e);for(var i=[],c=0,a=0;c<n.length&&a<o.ids.length;){var r=n[c],s=st(r,t),l=o.ids[a];e(r,o.entities[l])<=0?(i.push(s),c++):(i.push(l),a++)}o.ids=i.concat(c<n.length?n.slice(c).map(t):o.ids.slice(a)),n.forEach((function(e,n){o.entities[t(e)]=e}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:rt((function(t,e){return o([t],e)})),updateOne:rt((function(t,e){return i([t],e)})),upsertOne:rt((function(t,e){return c([t],e)})),addAll:rt((function(t,e){return e.entities={},e.ids=[],o(t,e),at.Both})),addMany:rt(o),updateMany:rt(i),upsertMany:rt(c),map:rt((function(t,e){return i(e.ids.reduce((function(n,o){var i=t(e.entities[o]);return i!==e.entities[o]&&n.push({id:o,changes:i}),n}),[]),e)}))}}(n,o):lt(n);return Object.assign({selectId:n,sortComparer:o},i,c,a)}var bt=Object(j.o)("notebooks"),dt=ut(),ht=dt.getInitialState({relevance:null,spinner:!1,searchMode:!1,searchQuery:""});function pt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case r.InvalidateNotebooksStore:return Object.assign(Object.assign({},t),{relevance:null});case r.FetchAllNotebooksApiCall:return Object.assign(Object.assign({},t),{spinner:!0});case r.FetchAllNotebooksSuccess:return Object.assign(Object.assign({},t),{relevance:e.payload.relevance,spinner:!1});case r.FetchAllNotebooksFailure:return Object.assign(Object.assign({},t),{spinner:!1});case r.ParentNotebookAtomicUpdate:var n=e.payload.notebookId,o=t.entities[n],i=o.size+e.payload.sizeDelta;return Object.assign(Object.assign({},t),{entities:Object.assign(Object.assign({},t.entities),_defineProperty({},n,Object.assign(Object.assign({},o),{size:i})))});case r.SetNotebooksSearchMode:return Object.assign(Object.assign({},t),{searchMode:!0});case r.ResetNotebooksSearchMode:return Object.assign(Object.assign({},t),{searchMode:!1});case r.SearchQueryChange:return Object.assign(Object.assign({},t),{searchQuery:e.payload.searchQuery});case r.AddNotebook:return dt.addOne(e.payload.notebook,t);case r.UpsertNotebook:return dt.upsertOne(e.payload.notebook,t);case r.AddNotebooks:return dt.addMany(e.payload.notebooks,t);case r.UpsertNotebooks:return dt.upsertMany(e.payload.notebooks,t);case r.UpdateNotebook:return dt.updateOne(e.payload.notebook,t);case r.UpdateNotebooks:return dt.updateMany(e.payload.notebooks,t);case r.DeleteNotebook:return dt.removeOne(e.payload.id,t);case r.DeleteNotebooks:return dt.removeMany(e.payload.ids,t);case r.LoadNotebooks:return dt.addAll(e.payload.notebooks,t);case r.ClearNotebooks:return dt.removeAll(t);default:return t}}var ft=Object(j.o)("notes"),kt=ut({sortComparer:function(t,e){return new Date(e.lastModifiedOn).getTime()-new Date(t.lastModifiedOn).getTime()}}),mt=kt.getInitialState({spinner:{},spinnerAll:!1});function gt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case L.FetchNotesByNotebookIdApiCall:return Object.assign(Object.assign({},t),{spinner:Object.assign(Object.assign({},t.spinner),_defineProperty({},e.payload.notebookId,!0))});case L.FetchNotesByNotebookIdFailure:case L.FetchNotesByNotebookIdSuccess:return Object.assign(Object.assign({},t),{spinner:Object.assign(Object.assign({},t.spinner),_defineProperty({},e.payload.notebookId,!1))});case L.FetchAllNotesApiCall:return Object.assign(Object.assign({},t),{spinnerAll:!0});case L.FetchAllNotesFailure:case L.FetchAllNotesSuccess:return Object.assign(Object.assign({},t),{spinnerAll:!1});case L.AddNote:return kt.addOne(e.payload.note,t);case L.UpsertNote:return kt.upsertOne(e.payload.note,t);case L.AddNotes:return kt.addMany(e.payload.notes,t);case L.UpsertNotes:return kt.upsertMany(e.payload.notes,t);case L.UpdateNote:return kt.updateOne(e.payload.note,t);case L.UpdateNotes:return kt.updateMany(e.payload.notes,t);case L.DeleteNote:return kt.removeOne(e.payload.id,t);case L.DeleteNotes:return kt.removeMany(e.payload.predicate,t);case L.LoadNotes:return kt.addAll(e.payload.notes,t);case L.ClearNotes:return kt.removeAll(t);default:return t}}var yt,Ct,Nt=kt.getSelectors().selectAll,Ot=Object(j.p)(ft,(function(t,e){var n=t.spinner[e.notebookId];return void 0!==n&&n})),vt=Object(j.p)(ft,Nt),It=Object(j.p)(vt,(function(t,e){return t.filter((function(t){return t.notebookId.toString()===e.notebookId}))})),jt=Object(j.p)(vt,(function(t,e){var n=t.filter((function(t){return t.notebookId.toString()===e.notebookId&&t.id.toString()===e.noteId}));return 1===n.length?n[0]:null})),wt=dt.getSelectors(),At=wt.selectIds,xt=wt.selectEntities,Ut=wt.selectAll,Tt=Object(j.p)(bt,(function(t){return t.relevance})),_t=Object(j.p)(bt,(function(t){return t.spinner})),Bt=Object(j.p)(bt,(function(t){return t.searchMode})),Ft=Object(j.p)(bt,(function(t){return t.searchQuery})),Mt=Object(j.p)(bt,Ut),$t=Object(j.p)(bt,xt),St=Object(j.p)(bt,At),Pt=Object(j.p)($t,(function(t,e){return t[e.notebookId]})),Rt=Object(j.p)(vt,(function(t){var e={};return t.forEach((function(t){var n=t.notebookId,o=e[n];e[n]=void 0===o?1:o+1})),e})),Dt=Object(j.p)(Rt,Mt,(function(t,e){var n={};return e.forEach((function(e){var o=e.id,i=e.size;n[o]=0===i&&void 0===t[o]||i===t[o]})),n})),qt=Object(j.p)(Dt,St,(function(t,e){var n=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(n=(c=a.next()).done);n=!0){if(!0!==t[c.value])return!1}}catch(r){o=!0,i=r}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return!0})),Lt=Object(j.p)(Ft,(function(t){var e=t.replace(/ {2,}/g," ").trim();return""===e?null:_toConsumableArray(new Set(e.toLocaleLowerCase().split(" ")))})),Et=Object(j.p)(Mt,Bt,Lt,(function(t,e,n){if(!1===e||null===n)return t;var o=!0,i=!1,c=void 0;try{for(var a,r=function(){var e=a.value;t=t.filter((function(t){return t.name.toLowerCase().includes(e)}))},s=n[Symbol.iterator]();!(o=(a=s.next()).done);o=!0)r()}catch(l){i=!0,c=l}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return t.slice(0,100)})),zt=Object(j.p)(vt,Bt,Lt,(function(t,e,n){if(!1===e||null===n)return[];var o=!0,i=!1,c=void 0;try{for(var a,r=function(){var e=a.value;t=t.filter((function(t){return t.title.toLowerCase().includes(e)||t.text.toLowerCase().includes(e)}))},s=n[Symbol.iterator]();!(o=(a=s.next()).done);o=!0)r()}catch(l){i=!0,c=l}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return t.slice(0,100)})),Qt=n("Wp6s"),Gt=n("NFeN"),Wt=n("XiUz"),Yt=n("Qu3c"),Vt=n("Xa2L"),Xt=n("STbY"),Ht=n("MutI"),Jt=n("znSr"),Kt=n("ihCf"),Zt=((yt=function(){function t(e,n,o){_classCallCheck(this,t),this.fb=e,this.dialogRef=n,this.data=o}return _createClass(t,[{key:"ngOnInit",value:function(){this.form=this.fb.group({titleInput:[this.data.titleCurrent,[]],textInput:[this.data.textCurrent,[]]})}},{key:"confirm",value:function(){this.dialogRef.close({newTitle:this.form.value.titleInput,newText:this.form.value.textInput})}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||yt)(I.Ob(T.c),I.Ob(U.g),I.Ob(U.a))},yt.\u0275cmp=I.Ib({type:yt,selectors:[["app-note-dialog"]],decls:12,vars:6,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","formControlName","titleInput",3,"placeholder"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10","formControlName","textInput",3,"placeholder"],["align","end"],["mat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(I.Ub(0,"h2",0),I.Bc(1),I.Tb(),I.Ub(2,"mat-dialog-content",1),I.Ub(3,"mat-form-field"),I.Pb(4,"input",2),I.Tb(),I.Ub(5,"mat-form-field"),I.Pb(6,"textarea",3),I.Tb(),I.Tb(),I.Ub(7,"mat-dialog-actions",4),I.Ub(8,"button",5),I.cc("click",(function(t){return e.close()})),I.Bc(9),I.Tb(),I.Ub(10,"button",5),I.cc("click",(function(t){return e.confirm()})),I.Bc(11),I.Tb(),I.Tb()),2&t&&(I.Cb(1),I.Cc(e.data.title),I.Cb(1),I.nc("formGroup",e.form),I.Cb(2),I.nc("placeholder",e.data.titlePlaceholder),I.Cb(2),I.nc("placeholder",e.data.textPlaceholder),I.Cb(3),I.Cc(e.data.cancelButton),I.Cb(2),I.Cc(e.data.confirmButton))},directives:[U.h,U.e,T.m,T.g,_.b,B.a,T.b,T.l,T.e,Kt.b,U.d,F.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),yt),te=n("Rn6e"),ee=((Ct=function(){function t(e,n){_classCallCheck(this,t),this.dialog=e,this.store=n,this.add=new I.o}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"openCreateNoteDialog",value:function(){var t=this;this.dialog.open(Zt,{data:{title:"Create a note in [".concat(this.notebook.name,"]"),titlePlaceholder:"Note title",titleCurrent:"",textPlaceholder:"Note content",textCurrent:"",cancelButton:"Cancel",confirmButton:"Create"}}).afterClosed().pipe(Object(D.a)((function(t){return void 0!==t})),Object(q.a)((function(e){return t.store.dispatch(new H({note:{title:e.newTitle,text:e.newText,notebookId:t.notebook.id}}))}))).subscribe()}},{key:"openEditDialog",value:function(){var t=this;this.dialog.open(M,{data:{title:"Rename the notebook",namePlaceholder:"New name",nameCurrent:this.notebook.name,cancelButton:"Cancel",confirmButton:"Rename"}}).afterClosed().pipe(Object(D.a)((function(e){return void 0!==e&&e.newName!==t.notebook.name})),Object(q.a)((function(e){return t.store.dispatch(new h({id:t.notebook.id.toString(),notebook:{name:e.newName}}))}))).subscribe()}},{key:"openDeleteDialog",value:function(){var t=this;this.dialog.open(te.a,{data:{title:"Delete notebook?",message:"Notebook [".concat(this.notebook.name,"] and [").concat(this.notebook.size,"] contained notes will be deleted"),cancelButton:"Cancel",confirmButton:"Delete"},autoFocus:!1}).afterClosed().pipe(Object(D.a)((function(t){return!0===t})),Object(q.a)((function(){return t.store.dispatch(new p({id:t.notebook.id.toString()}))}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||Ct)(I.Ob(U.c),I.Ob(j.h))},Ct.\u0275cmp=I.Ib({type:Ct,selectors:[["app-notebook-operations-menu"]],inputs:{notebook:"notebook"},outputs:{add:"add"},decls:20,vars:1,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["color","warn"]],template:function(t,e){if(1&t&&(I.Ub(0,"button",0),I.Ub(1,"mat-icon"),I.Bc(2,"more_vert"),I.Tb(),I.Tb(),I.Ub(3,"mat-menu",null,1),I.Ub(5,"button",2),I.cc("click",(function(t){return e.openCreateNoteDialog()})),I.Ub(6,"mat-icon",3),I.Bc(7,"note_add"),I.Tb(),I.Ub(8,"span"),I.Bc(9,"Add a note"),I.Tb(),I.Tb(),I.Ub(10,"button",2),I.cc("click",(function(t){return e.openEditDialog()})),I.Ub(11,"mat-icon",3),I.Bc(12,"edit"),I.Tb(),I.Ub(13,"span"),I.Bc(14,"Rename"),I.Tb(),I.Tb(),I.Ub(15,"button",2),I.cc("click",(function(t){return e.openDeleteDialog()})),I.Ub(16,"mat-icon",4),I.Bc(17,"clear"),I.Tb(),I.Ub(18,"span"),I.Bc(19,"Delete"),I.Tb(),I.Tb(),I.Tb()),2&t){var n=I.sc(4);I.nc("matMenuTriggerFor",n)}},directives:[F.b,Xt.c,Gt.a,Xt.d,Xt.a],styles:[""]}),Ct),ne=function(t){return[t,"notes"]},oe=function(t){return{"nb-fetched":t}};function ie(t,e){if(1&t&&(I.Ub(0,"div",2),I.Ub(1,"a",3),I.Ub(2,"mat-icon",4),I.Bc(3,"folder"),I.Tb(),I.Ub(4,"span",5),I.Bc(5),I.Tb(),I.Ub(6,"span",6),I.hc(7,"async"),I.Bc(8),I.Tb(),I.Tb(),I.Pb(9,"app-notebook-operations-menu",7),I.Tb()),2&t){var n=e.$implicit,o=I.gc(2);I.Cb(1),I.nc("routerLink",I.pc(7,ne,n.id)),I.Cb(4),I.Cc(n.size),I.Cb(1),I.nc("ngClass",I.pc(9,oe,I.ic(7,5,o.notebooksConsistency$)[n.id])),I.Cb(2),I.Cc(n.name),I.Cb(1),I.nc("notebook",n)}}function ce(t,e){if(1&t&&(I.Ub(0,"mat-nav-list"),I.Ac(1,ie,10,11,"div",1),I.hc(2,"async"),I.Tb()),2&t){var n=I.gc();I.Cb(1),I.nc("ngForOf",I.ic(2,1,n.notebooks$))}}var ae,re=((ae=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ae)},ae.\u0275cmp=I.Ib({type:ae,selectors:[["app-notebooks-nav-list"]],inputs:{notebooks$:"notebooks$",notebooksConsistency$:"notebooksConsistency$"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","","fxLayoutAlign","space-between center",4,"ngFor","ngForOf"],["fxLayout","","fxLayoutAlign","space-between center"],["mat-list-item","",3,"routerLink"],["mat-list-icon","","color","primary",1,"icon-mb"],[1,"nb-size"],[1,"nb-item",3,"ngClass"],[1,"icon-mb",3,"notebook"]],template:function(t,e){1&t&&(I.Ac(0,ce,3,3,"mat-nav-list",0),I.hc(1,"async")),2&t&&I.nc("ngIf",I.ic(1,1,e.notebooks$).length)},directives:[c.l,Ht.e,c.k,Wt.c,Wt.b,Ht.c,a.g,Gt.a,Ht.b,c.j,Jt.a,ee],pipes:[c.b],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto}.nb-item[_ngcontent-%COMP%]{text-align:left;margin:16px 0 16px 16px}.nb-fetched[_ngcontent-%COMP%]{font-weight:500}.nb-size[_ngcontent-%COMP%]{position:absolute;left:22px;width:20px;color:#fff;font-size:11px;text-align:center}.icon-mb[_ngcontent-%COMP%]{margin-bottom:2px}"]}),ae),se=n("QibW");function le(t,e){if(1&t){var n=I.Vb();I.Ub(0,"mat-list-item",6),I.Ub(1,"mat-radio-button",7),I.cc("change",(function(t){return I.uc(n),I.gc().selection=t.value})),I.Bc(2),I.Tb(),I.Tb()}if(2&t){var o=e.$implicit,i=I.gc();I.Cb(1),I.nc("checked",o.id===i.data.currentNbId)("value",o.id),I.Cb(1),I.Dc(" ",o.name," ")}}var ue,be,de=((be=function(){function t(e,n,o){_classCallCheck(this,t),this.store=e,this.dialogRef=n,this.notebooks$=this.store.select(Mt),this.data=o,this.selection=o.currentNbId}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"confirm",value:function(){this.dialogRef.close({nbId:this.selection})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"notChanged",value:function(){return this.selection===this.data.currentNbId}}]),t}()).\u0275fac=function(t){return new(t||be)(I.Ob(j.h),I.Ob(U.g),I.Ob(U.a))},be.\u0275cmp=I.Ib({type:be,selectors:[["app-note-move-dialog"]],decls:11,vars:7,consts:[["mat-dialog-title",""],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["role","listitem"],["color","primary",3,"checked","value","change"]],template:function(t,e){1&t&&(I.Ub(0,"h2",0),I.Bc(1),I.Tb(),I.Ub(2,"mat-dialog-content"),I.Ub(3,"mat-list",1),I.Ac(4,le,3,3,"mat-list-item",2),I.hc(5,"async"),I.Tb(),I.Tb(),I.Ub(6,"mat-dialog-actions",3),I.Ub(7,"button",4),I.cc("click",(function(t){return e.close()})),I.Bc(8),I.Tb(),I.Ub(9,"button",5),I.cc("click",(function(t){return e.confirm()})),I.Bc(10),I.Tb(),I.Tb()),2&t&&(I.Cb(1),I.Cc(e.data.title),I.Cb(3),I.nc("ngForOf",I.ic(5,5,e.notebooks$)),I.Cb(4),I.Cc(e.data.cancelButton),I.Cb(1),I.nc("disabled",e.notChanged()),I.Cb(1),I.Cc(e.data.confirmButton))},directives:[U.h,U.e,Ht.a,c.k,U.d,F.b,Ht.c,se.a],pipes:[c.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),be),he=((ue=function(){function t(e,n){_classCallCheck(this,t),this.dialog=e,this.store=n}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"openDeleteDialog",value:function(){var t=this;this.dialog.open(te.a,{data:{title:"Delete note?",message:"Note [".concat(this.note.title,"] will be deleted"),cancelButton:"Cancel",confirmButton:"Delete"},autoFocus:!1}).afterClosed().pipe(Object(D.a)((function(t){return!0===t})),Object(q.a)((function(){return t.store.dispatch(new K({id:t.note.id.toString(),notebookId:t.note.notebookId.toString()}))}))).subscribe()}},{key:"openEditDialog",value:function(){var t=this;this.dialog.open(Zt,{data:{title:"Edit the note",titlePlaceholder:"Note title",titleCurrent:this.note.title,textPlaceholder:"Note content",textCurrent:this.note.text,cancelButton:"Cancel",confirmButton:"Update"}}).afterClosed().pipe(Object(D.a)((function(t){return void 0!==t})),Object(q.a)((function(e){return t.store.dispatch(new J({id:t.note.id.toString(),currentNbId:t.note.notebookId,note:{title:e.newTitle,text:e.newText,notebookId:t.note.notebookId}}))}))).subscribe()}},{key:"openMoveDialog",value:function(){var t=this;this.dialog.open(de,{data:{title:"Move the note [".concat(this.note.title,"] to a notebook:"),currentNbId:this.note.notebookId,cancelButton:"Cancel",confirmButton:"Move"},autoFocus:!1}).afterClosed().pipe(Object(D.a)((function(t){return void 0!==t})),Object(q.a)((function(e){return t.store.dispatch(new J({id:t.note.id.toString(),currentNbId:t.note.notebookId,note:{title:t.note.title,text:t.note.text,notebookId:e.nbId}}))}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||ue)(I.Ob(U.c),I.Ob(j.h))},ue.\u0275cmp=I.Ib({type:ue,selectors:[["app-note-operations-menu"]],inputs:{note:"note"},decls:20,vars:1,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["color","warn"]],template:function(t,e){if(1&t&&(I.Ub(0,"button",0),I.Ub(1,"mat-icon"),I.Bc(2,"more_vert"),I.Tb(),I.Tb(),I.Ub(3,"mat-menu",null,1),I.Ub(5,"button",2),I.cc("click",(function(t){return e.openEditDialog()})),I.Ub(6,"mat-icon",3),I.Bc(7,"edit"),I.Tb(),I.Ub(8,"span"),I.Bc(9,"Edit"),I.Tb(),I.Tb(),I.Ub(10,"button",2),I.cc("click",(function(t){return e.openMoveDialog()})),I.Ub(11,"mat-icon",3),I.Bc(12,"find_replace"),I.Tb(),I.Ub(13,"span"),I.Bc(14,"Move"),I.Tb(),I.Tb(),I.Ub(15,"button",2),I.cc("click",(function(t){return e.openDeleteDialog()})),I.Ub(16,"mat-icon",4),I.Bc(17,"clear"),I.Tb(),I.Ub(18,"span"),I.Bc(19,"Delete"),I.Tb(),I.Tb(),I.Tb()),2&t){var n=I.sc(4);I.nc("matMenuTriggerFor",n)}},directives:[F.b,Xt.c,Gt.a,Xt.d,Xt.a],styles:[""]}),ue),pe=n("VNUq");function fe(t,e){if(1&t){var n=I.Vb();I.Ub(0,"button",10),I.cc("click",(function(t){return I.uc(n),I.gc(3).unHighlight()})),I.Ub(1,"mat-icon"),I.Bc(2,"highlight_off"),I.Tb(),I.Tb()}}var ke=function(t,e){return[t,"notes",e]},me=function(t){return[t]};function ge(t,e){if(1&t&&(I.Ub(0,"div",2),I.hc(1,"async"),I.Ub(2,"a",3),I.Ub(3,"mat-icon",4),I.Bc(4,"description"),I.Tb(),I.Ub(5,"div",5),I.Ub(6,"div",6),I.Bc(7),I.Tb(),I.Ub(8,"div"),I.Bc(9),I.Tb(),I.Ub(10,"div",7),I.Bc(11),I.hc(12,"dateTimeFormat"),I.Tb(),I.Tb(),I.Tb(),I.Ac(13,fe,3,0,"button",8),I.hc(14,"async"),I.Pb(15,"app-note-operations-menu",9),I.Tb()),2&t){var n=e.$implicit,o=I.gc(2);I.Fb("mat-elevation-z3","n"+n.id===I.ic(1,9,o.fragment$)),I.nc("id","n"+n.id),I.Cb(2),I.nc("routerLink",o.isSearchContext?I.qc(15,ke,n.notebookId,n.id):I.pc(18,me,n.id)),I.Cb(5),I.Cc(n.title),I.Cb(2),I.Cc(n.text),I.Cb(2),I.Cc(I.ic(12,11,n.lastModifiedOn)),I.Cb(2),I.nc("ngIf","n"+n.id===I.ic(14,13,o.fragment$)),I.Cb(2),I.nc("note",n)}}function ye(t,e){if(1&t&&(I.Ub(0,"mat-nav-list"),I.Ac(1,ge,16,20,"div",1),I.hc(2,"async"),I.Tb()),2&t){var n=I.gc();I.Cb(1),I.nc("ngForOf",I.ic(2,1,n.notes$))}}var Ce,Ne=((Ce=function(){function t(e,n,o){_classCallCheck(this,t),this.route=e,this.router=n,this.location=o,this.fragment$=this.route.fragment,this.pathWithoutFragment=this.location.path(!1),this.isSearchContext=!this.pathWithoutFragment.endsWith("notes")}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"unHighlight",value:function(){this.router.navigate([this.pathWithoutFragment])}}]),t}()).\u0275fac=function(t){return new(t||Ce)(I.Ob(a.a),I.Ob(a.f),I.Ob(c.h))},Ce.\u0275cmp=I.Ib({type:Ce,selectors:[["app-notes-nav-list"]],inputs:{notes$:"notes$"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","","fxLayoutAlign","space-between center",3,"mat-elevation-z3","id",4,"ngFor","ngForOf"],["fxLayout","","fxLayoutAlign","space-between center",3,"id"],["mat-list-item","",3,"routerLink"],["mat-list-icon","","color","primary",1,"icon-mb"],[1,"nb-item"],[1,"nb-title"],[1,"nb-time"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"icon-mb",3,"note"],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(I.Ac(0,ye,3,3,"mat-nav-list",0),I.hc(1,"async")),2&t&&I.nc("ngIf",I.ic(1,1,e.notes$).length)},directives:[c.l,Ht.e,c.k,Wt.c,Wt.b,Ht.c,a.g,Gt.a,Ht.b,he,F.b],pipes:[c.b,pe.a],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto}.nb-item[_ngcontent-%COMP%]{text-align:left;margin:16px 0 16px 16px}.nb-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.nb-time[_ngcontent-%COMP%]{font-size:12px}.icon-mb[_ngcontent-%COMP%]{margin-bottom:2px}"]}),Ce),Oe=["search"];function ve(t,e){if(1&t){var n=I.Vb();I.Ub(0,"div"),I.Ub(1,"mat-form-field",5),I.Ub(2,"button",6),I.Ub(3,"mat-icon",7),I.Bc(4,"search"),I.Tb(),I.Tb(),I.Ub(5,"input",8,9),I.cc("ngModelChange",(function(t){return I.uc(n),I.gc().searchQuery=t}))("ngModelChange",(function(t){return I.uc(n),I.gc().searchQueryChanged.next(t)})),I.Tb(),I.Ub(7,"button",10),I.cc("click",(function(t){return I.uc(n),I.gc().disableSearch()})),I.Ub(8,"mat-icon"),I.Bc(9,"close"),I.Tb(),I.Tb(),I.Tb(),I.Tb()}if(2&t){var o=I.gc();I.Cb(5),I.nc("ngModel",o.searchQuery)}}function Ie(t,e){if(1&t){var n=I.Vb();I.Ub(0,"div",11),I.Ub(1,"button",12),I.cc("click",(function(t){return I.uc(n),I.gc().openCreateNotebookDialog()})),I.Ub(2,"mat-icon"),I.Bc(3,"create_new_folder"),I.Tb(),I.Tb(),I.Ub(4,"h1",13),I.Bc(5,"All notebooks"),I.Tb(),I.Ub(6,"button",12),I.cc("click",(function(t){return I.uc(n),I.gc().enableSearch()})),I.Ub(7,"mat-icon"),I.Bc(8,"search"),I.Tb(),I.Tb(),I.Tb()}2&t&&(I.Cb(1),I.nc("matTooltip","Create a notebook"),I.Cb(5),I.nc("matTooltip","Open the search bar"))}function je(t,e){1&t&&I.Pb(0,"mat-spinner",14)}function we(t,e){if(1&t){var n=I.Vb();I.Ub(0,"div"),I.Ub(1,"button",15),I.cc("click",(function(t){return I.uc(n),I.gc().openCreateNotebookDialog()})),I.Ub(2,"mat-icon",16),I.Bc(3,"create_new_folder"),I.Tb(),I.Ub(4,"span"),I.Bc(5,"Create a notebook"),I.Tb(),I.Tb(),I.Tb()}}function Ae(t,e){if(1&t&&I.Pb(0,"app-notebooks-nav-list",17),2&t){var n=I.gc();I.nc("notebooks$",n.notebooks$)("notebooksConsistency$",n.notebooksConsistency$)}}function xe(t,e){if(1&t&&I.Pb(0,"app-notes-nav-list",18),2&t){var n=I.gc();I.nc("notes$",n.notesFilter$)}}function Ue(t,e){if(1&t&&(I.Ub(0,"div",3),I.Ub(1,"a",4),I.Ub(2,"mat-icon"),I.Bc(3,"arrow_back"),I.Tb(),I.Tb(),I.Ub(4,"h1",5),I.Bc(5),I.Tb(),I.Pb(6,"app-notebook-operations-menu",6),I.Tb()),2&t){var n=e.ngIf;I.Cb(1),I.nc("routerLink","../.."),I.Cb(4),I.Cc(n.name),I.Cb(1),I.nc("notebook",n)}}function Te(t,e){1&t&&I.Pb(0,"mat-spinner",7)}function _e(t,e){if(1&t&&I.Pb(0,"app-notes-nav-list",8),2&t){var n=I.gc();I.nc("notes$",n.notes$)}}function Be(t,e){if(1&t&&(I.Ub(0,"mat-card-subtitle"),I.Bc(1),I.hc(2,"dateTimeFormat"),I.Tb()),2&t){var n=I.gc(2);I.Cb(1),I.Cc(I.ic(2,1,n.currentNote.lastModifiedOn))}}function Fe(t,e){if(1&t&&(I.Ub(0,"mat-card-header"),I.Ub(1,"mat-icon",4),I.Bc(2,"description"),I.Tb(),I.Ub(3,"mat-card-title"),I.Bc(4),I.Tb(),I.Ac(5,Be,3,3,"mat-card-subtitle",0),I.Tb()),2&t){var n=e.ngIf,o=I.gc();I.Cb(4),I.Cc(n.name),I.Cb(1),I.nc("ngIf",o.currentNote)}}function Me(t,e){1&t&&I.Pb(0,"mat-spinner",5)}function $e(t,e){if(1&t&&(I.Ub(0,"form",6),I.Ub(1,"mat-form-field",7),I.Ub(2,"mat-label"),I.Bc(3,"Note title"),I.Tb(),I.Pb(4,"input",8),I.Tb(),I.Ub(5,"mat-form-field",7),I.Ub(6,"mat-label"),I.Bc(7,"Note content"),I.Tb(),I.Pb(8,"textarea",9),I.Tb(),I.Tb()),2&t){var n=I.gc();I.nc("formGroup",n.form)}}function Se(t,e){if(1&t){var n=I.Vb();I.Ub(0,"mat-card-actions",10),I.Ub(1,"button",11),I.cc("click",(function(t){return I.uc(n),I.gc().goBack()})),I.Bc(2,"Go back"),I.Tb(),I.Ub(3,"a",12),I.Bc(4,"Show in notebook"),I.Tb(),I.Ub(5,"button",13),I.cc("click",(function(t){return I.uc(n),I.gc().updateNote()})),I.Bc(6,"Save"),I.Tb(),I.Tb()}if(2&t){var o=I.gc();I.Cb(3),I.nc("routerLink","..")("fragment","n"+o.id),I.Cb(2),I.nc("disabled",o.notChanged())}}var Pe,Re,De,qe,Le=[{path:"",component:A,children:[{path:"",pathMatch:"full",component:(De=function(){function t(e,n,o){_classCallCheck(this,t),this.store=e,this.dialog=n,this.cd=o,this.notebooks$=this.store.select(Et),this.notesFilter$=this.store.select(zt),this.spinner$=this.store.select(_t),this.notebooksConsistency$=this.store.select(Dt),this.searchMode$=this.store.select(Bt),this.searchQueryChanged=new x.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store.select(Ft).pipe(Object($.a)(1),Object(S.a)((function(e){return t.searchQuery=e}))).subscribe(),this.searchQueryChanged.pipe(Object(P.a)(300),Object(R.a)(),Object(S.a)((function(e){return t.store.dispatch(new g({searchQuery:e}))}))).subscribe()}},{key:"openCreateNotebookDialog",value:function(){var t=this;this.dialog.open(M,{data:{title:"Create a notebook",namePlaceholder:"Notebook name",nameCurrent:"",cancelButton:"Cancel",confirmButton:"Create"}}).afterClosed().pipe(Object(D.a)((function(t){return void 0!==t})),Object(q.a)((function(e){return t.store.dispatch(new d({notebook:{name:e.newName}}))}))).subscribe()}},{key:"enableSearch",value:function(){this.store.dispatch(new k),this.cd.detectChanges(),this.searchElement.nativeElement.focus(),this.store.dispatch(new W)}},{key:"disableSearch",value:function(){this.store.dispatch(new m)}}]),t}(),De.\u0275fac=function(t){return new(t||De)(I.Ob(j.h),I.Ob(U.c),I.Ob(I.h))},De.\u0275cmp=I.Ib({type:De,selectors:[["app-notebooks-list"]],viewQuery:function(t,e){var n;1&t&&I.Fc(Oe,!0),2&t&&I.rc(n=I.dc())&&(e.searchElement=n.first)},decls:17,vars:26,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["style","margin:0 auto",4,"ngIf"],[3,"notebooks$","notebooksConsistency$",4,"ngIf"],[3,"notes$",4,"ngIf"],["floatLabel","never"],["mat-button","","disabled","","matPrefix",""],["matPrefix",""],["matInput","","type","text",3,"ngModel","ngModelChange"],["search",""],["mat-icon-button","","matSuffix","",2,"margin-right","8px",3,"click"],["fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","","color","primary","fxFlex","0 0 auto",3,"matTooltip","click"],["fxFlex","1 1 100%"],[2,"margin","0 auto"],["mat-menu-item","",3,"click"],["color","primary"],[3,"notebooks$","notebooksConsistency$"],[3,"notes$"]],template:function(t,e){1&t&&(I.Ub(0,"mat-card"),I.Ac(1,ve,10,1,"div",0),I.hc(2,"async"),I.Ac(3,Ie,9,2,"div",1),I.hc(4,"async"),I.hc(5,"async"),I.hc(6,"async"),I.Ac(7,je,1,0,"mat-spinner",2),I.hc(8,"async"),I.Ac(9,we,6,0,"div",0),I.hc(10,"async"),I.hc(11,"async"),I.hc(12,"async"),I.Ac(13,Ae,1,2,"app-notebooks-nav-list",3),I.hc(14,"async"),I.Ac(15,xe,1,1,"app-notes-nav-list",4),I.hc(16,"async"),I.Tb()),2&t&&(I.Cb(1),I.nc("ngIf",I.ic(2,6,e.searchMode$)),I.Cb(2),I.nc("ngIf",I.ic(4,8,e.notebooks$).length&&!I.ic(5,10,e.spinner$)&&!I.ic(6,12,e.searchMode$)),I.Cb(4),I.nc("ngIf",I.ic(8,14,e.spinner$)),I.Cb(2),I.nc("ngIf",!I.ic(10,16,e.spinner$)&&!I.ic(11,18,e.searchMode$)&&!I.ic(12,20,e.notebooks$).length),I.Cb(4),I.nc("ngIf",!I.ic(14,22,e.spinner$)),I.Cb(2),I.nc("ngIf",I.ic(16,24,e.searchMode$)))},directives:[Qt.a,c.l,_.b,F.b,_.f,Gt.a,B.a,T.b,T.l,T.o,_.g,Wt.c,Wt.b,Wt.a,Yt.a,Vt.b,Xt.a,re,Ne],pipes:[c.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}mat-card[_ngcontent-%COMP%]{margin:16px;min-width:270px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:300;letter-spacing:-.5px;margin:16px;text-align:center}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),De)},{path:":id/notes",pathMatch:"full",component:(Re=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.route=n,this.nbId=this.route.snapshot.paramMap.get("id"),this.notebook$=this.store.select(Pt,{notebookId:this.nbId}),this.notes$=this.store.select(It,{notebookId:this.nbId}),this.spinner$=this.store.select(Ot,{notebookId:this.nbId})}return _createClass(t,[{key:"ngOnInit",value:function(){this.store.dispatch(new E({notebookId:this.nbId.toString()}))}}]),t}(),Re.\u0275fac=function(t){return new(t||Re)(I.Ob(j.h),I.Ob(a.a))},Re.\u0275cmp=I.Ib({type:Re,selectors:[["app-notes-list"]],decls:7,vars:9,consts:[["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["style","margin:0 auto;",4,"ngIf"],[3,"notes$",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center"],["mat-button","","fxFlex","0 0 auto",3,"routerLink"],["fxFlex","1 1 100%"],["fxFlex","0 0 auto",1,"icon-mb",3,"notebook"],[2,"margin","0 auto"],[3,"notes$"]],template:function(t,e){1&t&&(I.Ub(0,"mat-card"),I.Ac(1,Ue,7,3,"div",0),I.hc(2,"async"),I.Ac(3,Te,1,0,"mat-spinner",1),I.hc(4,"async"),I.Ac(5,_e,1,1,"app-notes-nav-list",2),I.hc(6,"async"),I.Tb()),2&t&&(I.Cb(1),I.nc("ngIf",I.ic(2,3,e.notebook$)),I.Cb(2),I.nc("ngIf",I.ic(4,5,e.spinner$)),I.Cb(2),I.nc("ngIf",!I.ic(6,7,e.spinner$)))},directives:[Qt.a,c.l,Wt.c,Wt.b,F.a,a.g,Wt.a,Gt.a,ee,Vt.b,Ne],pipes:[c.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}mat-card[_ngcontent-%COMP%]{margin:16px;min-width:270px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:300;letter-spacing:-.5px;margin:16px;text-align:center}"]}),Re)},{path:":id/notes/:noteId",pathMatch:"full",component:(Pe=function(){function t(e,n,o,i){_classCallCheck(this,t),this.store=e,this.fb=n,this.route=o,this.location=i,this.nbId=this.route.snapshot.paramMap.get("id"),this.id=this.route.snapshot.paramMap.get("noteId"),this.notebook$=this.store.select(Pt,{notebookId:this.nbId}),this.spinner$=this.store.select(Ot,{notebookId:this.nbId})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store.dispatch(new E({notebookId:this.nbId.toString()})),this.store.select(jt,{notebookId:this.nbId,noteId:this.id}).pipe(Object(D.a)((function(t){return null!==t})),Object(S.a)((function(e){t.form=t.fb.group({titleInput:[e.title,[]],textInput:[e.text,[]]}),t.currentNote=e}))).subscribe()}},{key:"updateNote",value:function(){this.store.dispatch(new J({id:this.currentNote.id.toString(),currentNbId:this.currentNote.notebookId,note:{title:this.form.value.titleInput,text:this.form.value.textInput,notebookId:this.currentNote.notebookId}}))}},{key:"notChanged",value:function(){return this.currentNote.title===this.form.value.titleInput&&this.currentNote.text===this.form.value.textInput}},{key:"goBack",value:function(){this.location.back()}}]),t}(),Pe.\u0275fac=function(t){return new(t||Pe)(I.Ob(j.h),I.Ob(T.c),I.Ob(a.a),I.Ob(c.h))},Pe.\u0275cmp=I.Ib({type:Pe,selectors:[["app-note-card"]],decls:7,vars:8,consts:[[4,"ngIf"],["style","margin:0 auto;",4,"ngIf"],[3,"formGroup",4,"ngIf"],["align","end",4,"ngIf"],["mat-card-avatar","","color","primary"],[2,"margin","0 auto"],[3,"formGroup"],["appearance","outline"],["matInput","","placeholder","Note title","formControlName","titleInput"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10","placeholder","Note content","formControlName","textInput"],["align","end"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"routerLink","fragment"],["mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(I.Ub(0,"mat-card"),I.Ac(1,Fe,6,2,"mat-card-header",0),I.hc(2,"async"),I.Ac(3,Me,1,0,"mat-spinner",1),I.hc(4,"async"),I.Ac(5,$e,9,1,"form",2),I.Ac(6,Se,7,3,"mat-card-actions",3),I.Tb()),2&t&&(I.Cb(1),I.nc("ngIf",I.ic(2,4,e.notebook$)),I.Cb(2),I.nc("ngIf",I.ic(4,6,e.spinner$)),I.Cb(2),I.nc("ngIf",e.form),I.Cb(1),I.nc("ngIf",e.form))},directives:[Qt.a,c.l,Qt.e,Gt.a,Qt.c,Qt.h,Qt.g,Vt.b,T.r,T.m,T.g,_.b,_.e,B.a,T.b,T.l,T.e,Kt.b,Qt.b,F.b,F.a,a.g],pipes:[c.b,pe.a],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}mat-card[_ngcontent-%COMP%]{margin:16px;min-width:270px}mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),Pe)}]}],Ee=((qe=function t(){_classCallCheck(this,t)}).\u0275mod=I.Mb({type:qe}),qe.\u0275inj=I.Lb({factory:function(t){return new(t||qe)},imports:[[a.h.forChild(Le)],a.h]}),qe),ze=n("YUcS"),Qe=n("vvyD"),Ge=n("snw9"),We=n("zp1y"),Ye=n("XqQ8"),Ve=n("JIr8"),Xe=n("bOdf"),He=n("MrWr"),Je=n("4MDz"),Ke=n("LRne"),Ze=n("EY2u");function tn(t){return{id:t.id,name:t.name,size:t.size}}var en,nn=n("bUwk"),on=n("zkEj"),cn=((en=function t(e,n,o,i){var c=this;_classCallCheck(this,t),this.actions$=e,this.http=n,this.store=o,this.snackBar=i,this.fetchAllNotebooksRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(r.FetchAllNotebooksRequest),Object(We.a)(c.store.select(Tt)),Object(We.a)(c.store.select(He.b),(function(t,e){var n,o=_slicedToArray(t,2);return o[0],{relevance:o[1],newRelevance:(n=e.userId,{userId:n,timestamp:(new Date).getTime()})}})),Object(D.a)((function(t){return null===t.relevance||t.relevance.userId!==t.newRelevance.userId})),Object(S.a)((function(){return c.store.dispatch(new v)})),Object(S.a)((function(){return c.store.dispatch(new ct)})),Object(S.a)((function(){return c.store.dispatch(new l)})),Object(Ye.a)((function(t){return c.http.getAllNotebooks().pipe(Object(q.a)((function(e){return new u({response:e,relevance:t.newRelevance})})),Object(Ve.a)((function(t){return Object(Ke.a)(new b({message:Object(Je.b)(t,"Failed to get all notebooks")}))})))})))})),this.fetchAllNotebooksSuccess$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(r.FetchAllNotebooksSuccess),Object(q.a)((function(t){var e=t.payload.response.map((function(t){return tn(t)}));return new y({notebooks:e})})))})),this.fetchAllNotebooksFailure$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(r.FetchAllNotebooksFailure),Object(S.a)((function(t){return c.snackBar.openError(t.payload.message)})))}),{dispatch:!1}),this.createNotebookRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(r.CreateNotebookRequest),Object(Ye.a)((function(t){return c.http.createNotebook(t.payload.notebook).pipe(Object(q.a)((function(t){return new C({notebook:tn(t)})})),Object(Ve.a)((function(t){return c.snackBar.openError(Object(Je.b)(t,"Failed to create notebook")),Ze.a})))})))})),this.updateNotebookRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(r.UpdateNotebookRequest),Object(Ye.a)((function(t){return c.http.updateNotebook(t.payload.id,t.payload.notebook).pipe(Object(q.a)((function(t){return new N({notebook:{id:t.id,changes:t}})})),Object(Ve.a)((function(t){return c.snackBar.openError(Object(Je.b)(t,"Failed to update notebook")),Ze.a})))})))})),this.deleteNotebookRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(r.DeleteNotebookRequest),Object(Ye.a)((function(t){return c.http.deleteNotebook(t.payload.id).pipe(Object(Xe.a)((function(){return[new O({id:t.payload.id}),new it({predicate:function(e){return e.notebookId.toString()===t.payload.id}})]})),Object(Ve.a)((function(t){return c.snackBar.openError(Object(Je.b)(t,"Failed to delete notebook")),Ze.a})))})))}))}).\u0275fac=function(t){return new(t||en)(I.Yb(Ge.a),I.Yb(nn.a),I.Yb(j.h),I.Yb(on.a))},en.\u0275prov=I.Kb({token:en,factory:en.\u0275fac}),en),an=n("5+tZ");function rn(t){return{id:t.id,title:t.title,text:t.text,notebookId:t.notebookId,lastModifiedOn:t.lastModifiedOn}}var sn,ln=((sn=function t(e,n,o,i){var c=this;_classCallCheck(this,t),this.actions$=e,this.store=n,this.http=o,this.snackBar=i,this.fetchNotesByNotebookRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.FetchNotesByNotebookIdRequest),Object(We.a)(c.store.select(Dt),(function(t,e){return{notebookId:t.payload.notebookId,notConsistent:!0!==e[t.payload.notebookId]}})),Object(D.a)((function(t){return t.notConsistent})),Object(S.a)((function(t){return c.store.dispatch(new z({notebookId:t.notebookId}))})),Object(an.a)((function(t){return c.http.getNotesByNotebookId(t.notebookId).pipe(Object(q.a)((function(e){return new Q({response:e,notebookId:t.notebookId})})),Object(Ve.a)((function(e){return Object(Ke.a)(new G({message:Object(Je.b)(e,"Failed to get notes by notebook"),notebookId:t.notebookId}))})))})))})),this.fetchNotesByNotebookSuccess$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.FetchNotesByNotebookIdSuccess),Object(Xe.a)((function(t){return[new it({predicate:function(e){return e.notebookId.toString()===t.payload.notebookId}}),new et({notes:t.payload.response.map((function(t){return rn(t)}))})]})))})),this.fetchNotesByNotebookFailure$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.FetchNotesByNotebookIdFailure),Object(S.a)((function(t){return c.snackBar.openError(t.payload.message)})))}),{dispatch:!1}),this.fetchAllNotesRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.FetchAllNotesRequest),Object(We.a)(c.store.select(qt),(function(t,e){return e})),Object(D.a)((function(t){return!t})),Object(S.a)((function(){return c.store.dispatch(new Y)})),Object(Ye.a)((function(){return c.http.getAllNotes().pipe(Object(q.a)((function(t){return new V({response:t})})),Object(Ve.a)((function(t){return Object(Ke.a)(new X({message:Object(Je.b)(t,"Failed to get all notes")}))})))})))})),this.fetchAllNotesSuccess$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.FetchAllNotesSuccess),Object(q.a)((function(t){var e=t.payload.response.map((function(t){return rn(t)}));return new Z({notes:e})})))})),this.fetchAllNotesFailure$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.FetchAllNotesFailure),Object(S.a)((function(t){return c.snackBar.openError(t.payload.message)})))}),{dispatch:!1}),this.createNoteRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.CreateNoteRequest),Object(Ye.a)((function(t){return c.http.createNote(t.payload.note).pipe(Object(S.a)((function(t){return c.store.dispatch(new f({notebookId:t.notebookId.toString(),sizeDelta:1}))})),Object(q.a)((function(t){return new tt({note:rn(t)})})),Object(Ve.a)((function(t){return c.snackBar.openError(Object(Je.b)(t,"Failed to create note")),Ze.a})))})))})),this.updateNoteRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.UpdateNoteRequest),Object(Ye.a)((function(t){return c.http.updateNote(t.payload.id,t.payload.note).pipe(Object(q.a)((function(t){return rn(t)})),Object(S.a)((function(e){e.notebookId!==t.payload.currentNbId&&(c.store.dispatch(new f({notebookId:t.payload.currentNbId.toString(),sizeDelta:-1})),c.store.dispatch(new f({notebookId:e.notebookId.toString(),sizeDelta:1})))})),Object(q.a)((function(t){return new nt({note:{id:t.id,changes:t}})})),Object(Ve.a)((function(t){return c.snackBar.openError(Object(Je.b)(t,"Failed to update note")),Ze.a})))})))})),this.deleteNoteRequest$=Object(Ge.c)((function(){return c.actions$.pipe(Object(Ge.d)(L.DeleteNoteRequest),Object(Ye.a)((function(t){return c.http.deleteNote(t.payload.id).pipe(Object(S.a)((function(){return c.store.dispatch(new f({notebookId:t.payload.notebookId,sizeDelta:-1}))})),Object(q.a)((function(){return new ot({id:t.payload.id.toString()})})),Object(Ve.a)((function(t){return c.snackBar.openError(Object(Je.b)(t,"Failed to delete note")),Ze.a})))})))}))}).\u0275fac=function(t){return new(t||sn)(I.Yb(Ge.a),I.Yb(j.h),I.Yb(nn.a),I.Yb(on.a))},sn.\u0275prov=I.Kb({token:sn,factory:sn.\u0275fac}),sn),un=n("hI8S"),bn=n("hID/");n.d(e,"NotebooksModule",(function(){return hn}));var dn,hn=((dn=function t(){_classCallCheck(this,t)}).\u0275mod=I.Mb({type:dn}),dn.\u0275inj=I.Lb({factory:function(t){return new(t||dn)},imports:[[bn.a,un.a,c.c,ze.a,T.h,T.p,Qe.a,Ee,Ge.b.forFeature([cn,ln]),j.j.forFeature("notebooks",pt),j.j.forFeature("notes",gt)]]}),dn)}}]);