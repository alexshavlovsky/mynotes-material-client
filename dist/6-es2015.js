(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Yj9t:function(t,e,r){"use strict";r.r(e);var s=r("ofXK"),o=r("3Pt+"),a=r("vvyD"),i=r("YUcS"),n=r("tyNb"),c=r("kt0X"),p=function(t){return t.LOGIN_REQUEST="[Auth LoginPage] Login Request",t.LOGIN_SUCCESS="[Auth API] Login Success",t.LOGIN_FAILURE="[Auth API] Login Failure",t.REGISTER_REQUEST="[Auth RegisterPage] Register Request",t.REGISTER_SUCCESS="[Auth API] Register Success",t.REGISTER_FAILURE="[Auth API] Register Failure",t}({});class l{constructor(t){this.payload=t,this.type=p.LOGIN_REQUEST}}class b{constructor(t){this.payload=t,this.type=p.LOGIN_SUCCESS}}class m{constructor(t){this.payload=t,this.type=p.LOGIN_FAILURE}}class d{constructor(t){this.payload=t,this.type=p.REGISTER_REQUEST}}class g{constructor(t){this.payload=t,this.type=p.REGISTER_SUCCESS}}class u{constructor(t){this.payload=t,this.type=p.REGISTER_FAILURE}}const h=Object(c.o)("auth"),f={isLoginRequestInProgress:!1,loginLastErrorMessage:null,isRegisterRequestInProgress:!1,registerLastErrorMessage:null};function E(t=f,e){switch(e.type){case p.LOGIN_REQUEST:return Object.assign(Object.assign({},t),{isLoginRequestInProgress:!0,loginLastErrorMessage:null});case p.LOGIN_SUCCESS:return Object.assign(Object.assign({},t),{isLoginRequestInProgress:!1});case p.LOGIN_FAILURE:return Object.assign(Object.assign({},t),{isLoginRequestInProgress:!1,loginLastErrorMessage:e.payload.message});case p.REGISTER_REQUEST:return Object.assign(Object.assign({},t),{isRegisterRequestInProgress:!0,registerLastErrorMessage:null});case p.REGISTER_SUCCESS:return Object.assign(Object.assign({},t),{isRegisterRequestInProgress:!1});case p.REGISTER_FAILURE:return Object.assign(Object.assign({},t),{isRegisterRequestInProgress:!1,registerLastErrorMessage:e.payload.message});default:return t}}const O=Object(c.p)(h,t=>t.isLoginRequestInProgress),S=Object(c.p)(h,t=>t.loginLastErrorMessage),w=Object(c.p)(h,t=>t.isRegisterRequestInProgress),R=Object(c.p)(h,t=>t.registerLastErrorMessage);var C=r("fXoL"),P=r("4MDz"),I=r("uBrG"),y=r("Wp6s"),T=r("NFeN"),U=r("XiUz"),L=r("kmnG"),j=r("qFsG"),M=r("bTqV"),_=r("TU8p"),q=r("Qu3c"),B=r("fFdG"),v=r("7xDd");const N=[{path:"login",component:(()=>{class t{constructor(t,e,r,s){this.appProps=t,this.formBuilder=e,this.formValidationService=r,this.store=s,this.isInProgress$=this.store.select(O),this.lastErrorMessage$=this.store.select(S)}ngOnInit(){this.form=this.formBuilder.group({email:["",[o.q.required,o.q.email]],password:["",[o.q.required,o.q.minLength(this.appProps.userPasswordMinLength)]]})}get emailError(){return this.formValidationService.getValidationMessage(this.form.controls.email)}get passwordError(){return this.formValidationService.getValidationMessage(this.form.controls.password,{minlength:this.appProps.userPasswordMinLength})}onSubmit(){this.form.valid&&this.store.dispatch(new l({request:this.form.value}))}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(P.a),C.Ob(o.c),C.Ob(I.b),C.Ob(c.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-login"]],decls:28,vars:21,consts:[[1,"m-a"],["fxLayout","column",1,"pb-16",3,"formGroup","ngSubmit"],["type","email","matInput","","placeholder","Your email","formControlName","email",1,"form-control"],["type","password","matInput","","placeholder","Your password","formControlName","password",1,"form-control"],["type","submit","mat-raised-button","","color","primary","matBadge","!","matBadgeColor","warn",3,"matBadgeHidden","disabled","matTooltip"],["mat-button","","color","primary","routerLink","../register"]],template:function(t,e){1&t&&(C.Ub(0,"div",0),C.Ub(1,"mat-card"),C.Ub(2,"mat-icon"),C.Bc(3,"notes"),C.Tb(),C.Ub(4,"h1"),C.Bc(5),C.hc(6,"appProp"),C.Tb(),C.Ub(7,"form",1),C.cc("ngSubmit",(function(t){return e.onSubmit()})),C.Ub(8,"mat-form-field"),C.Pb(9,"input",2),C.Ub(10,"mat-error"),C.Bc(11),C.Tb(),C.Tb(),C.Ub(12,"mat-form-field"),C.Pb(13,"input",3),C.Ub(14,"mat-error"),C.Bc(15),C.Tb(),C.Tb(),C.Ub(16,"button",4),C.hc(17,"async"),C.hc(18,"async"),C.hc(19,"prefix"),C.hc(20,"async"),C.Bc(21," Sing in "),C.Tb(),C.Tb(),C.Ub(22,"mat-card-content"),C.Bc(23),C.hc(24,"appProp"),C.Ub(25,"a",5),C.Bc(26,"Create an account"),C.Tb(),C.Bc(27,". "),C.Tb(),C.Tb(),C.Tb()),2&t&&(C.Cb(5),C.Dc("Sign in to ",C.ic(6,8,"appName"),""),C.Cb(2),C.nc("formGroup",e.form),C.Cb(4),C.Cc(e.emailError),C.Cb(4),C.Cc(e.passwordError),C.Cb(1),C.nc("matBadgeHidden",!C.ic(17,10,e.lastErrorMessage$))("disabled",C.ic(18,12,e.isInProgress$))("matTooltip",C.jc(19,14,C.ic(20,17,e.lastErrorMessage$),"Last error: ")),C.Cb(7),C.Dc(" New to ",C.ic(24,19,"appName"),"? "))},directives:[y.a,T.a,o.r,o.m,U.c,o.g,L.b,j.a,o.b,o.l,o.e,L.a,M.b,_.a,q.a,y.d,M.a,n.g],pipes:[B.a,s.b,v.a],styles:[".pb-16[_ngcontent-%COMP%]{padding-bottom:16px}.m-a[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]{display:-webkit-box;display:flex;height:100vh;width:100vw;overflow-x:hidden}mat-card[_ngcontent-%COMP%]{width:270px;text-align:center}mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:300;letter-spacing:-.5px}a[_ngcontent-%COMP%]{padding:0;min-width:0}"]}),t})()},{path:"register",component:(()=>{class t{constructor(t,e,r,s){this.appProps=t,this.formBuilder=e,this.formValidationService=r,this.store=s,this.isInProgress$=this.store.select(w),this.lastErrorMessage$=this.store.select(R),this.errorMatcher=new I.a(this.appProps.passwordCrossFieldValidatorErrorKey)}ngOnInit(){this.form=this.formBuilder.group({firstName:["",o.q.required],lastName:[""],email:["",[o.q.required,o.q.email]],password:["",[o.q.required,o.q.minLength(this.appProps.userPasswordMinLength)]],confirmPassword:""},{validator:this.formValidationService.getCrossFieldEqualityValidator("password","confirmPassword",this.appProps.passwordCrossFieldValidatorErrorKey)})}get firstNameError(){return this.formValidationService.getValidationMessage(this.form.controls.firstName)}get emailError(){return this.formValidationService.getValidationMessage(this.form.controls.email)}get passwordError(){return this.formValidationService.getValidationMessage(this.form.controls.password,{minlength:this.appProps.userPasswordMinLength})}get confirmPasswordError(){return this.formValidationService.getValidationMessage(this.form)}onSubmit(){this.form.valid&&this.store.dispatch(new d({request:this.form.value}))}}return t.\u0275fac=function(e){return new(e||t)(C.Ob(P.a),C.Ob(o.c),C.Ob(I.b),C.Ob(c.h))},t.\u0275cmp=C.Ib({type:t,selectors:[["app-register"]],decls:37,vars:21,consts:[[1,"m-a"],["fxLayout","column",1,"pb-16",3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Your first name","formControlName","firstName",1,"form-control"],["type","text","matInput","","placeholder","Your last name","formControlName","lastName",1,"form-control"],["type","email","matInput","","placeholder","Your email","formControlName","email",1,"form-control"],["type","password","matInput","","placeholder","Your password","formControlName","password",1,"form-control"],["type","password","matInput","","placeholder","Confirm password","formControlName","confirmPassword",1,"form-control",3,"errorStateMatcher"],["type","submit","mat-raised-button","","color","primary","matBadge","!","matBadgeColor","warn",3,"matBadgeHidden","disabled","matTooltip"],["mat-button","","color","primary","routerLink","../login"]],template:function(t,e){1&t&&(C.Ub(0,"div",0),C.Ub(1,"mat-card"),C.Ub(2,"mat-icon"),C.Bc(3,"how_to_reg"),C.Tb(),C.Ub(4,"h1"),C.Bc(5),C.hc(6,"appProp"),C.Tb(),C.Ub(7,"form",1),C.cc("ngSubmit",(function(t){return e.onSubmit()})),C.Ub(8,"mat-form-field"),C.Pb(9,"input",2),C.Ub(10,"mat-error"),C.Bc(11),C.Tb(),C.Tb(),C.Ub(12,"mat-form-field"),C.Pb(13,"input",3),C.Tb(),C.Ub(14,"mat-form-field"),C.Pb(15,"input",4),C.Ub(16,"mat-error"),C.Bc(17),C.Tb(),C.Tb(),C.Ub(18,"mat-form-field"),C.Pb(19,"input",5),C.Ub(20,"mat-error"),C.Bc(21),C.Tb(),C.Tb(),C.Ub(22,"mat-form-field"),C.Pb(23,"input",6),C.Ub(24,"mat-error"),C.Bc(25),C.Tb(),C.Tb(),C.Ub(26,"button",7),C.hc(27,"async"),C.hc(28,"async"),C.hc(29,"prefix"),C.hc(30,"async"),C.Bc(31," Sing up "),C.Tb(),C.Tb(),C.Ub(32,"mat-card-content"),C.Bc(33," Already registered? "),C.Ub(34,"a",8),C.Bc(35,"Log in"),C.Tb(),C.Bc(36,". "),C.Tb(),C.Tb(),C.Tb()),2&t&&(C.Cb(5),C.Dc("Sign up for ",C.ic(6,10,"appName"),""),C.Cb(2),C.nc("formGroup",e.form),C.Cb(4),C.Cc(e.firstNameError),C.Cb(6),C.Cc(e.emailError),C.Cb(4),C.Cc(e.passwordError),C.Cb(2),C.nc("errorStateMatcher",e.errorMatcher),C.Cb(2),C.Cc(e.confirmPasswordError),C.Cb(1),C.nc("matBadgeHidden",!C.ic(27,12,e.lastErrorMessage$))("disabled",C.ic(28,14,e.isInProgress$))("matTooltip",C.jc(29,16,C.ic(30,19,e.lastErrorMessage$),"Last error: ")))},directives:[y.a,T.a,o.r,o.m,U.c,o.g,L.b,j.a,o.b,o.l,o.e,L.a,M.b,_.a,q.a,y.d,M.a,n.g],pipes:[B.a,s.b,v.a],styles:[".pb-16[_ngcontent-%COMP%]{padding-bottom:16px}.m-a[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]{display:-webkit-box;display:flex;height:100vh;width:100vw;overflow-x:hidden}mat-card[_ngcontent-%COMP%]{width:270px;text-align:center}mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:300;letter-spacing:-.5px}a[_ngcontent-%COMP%]{padding:0;min-width:0}"]}),t})()},{path:"",pathMatch:"full",redirectTo:"login"}];let G=(()=>{class t{}return t.\u0275mod=C.Mb({type:t}),t.\u0275inj=C.Lb({factory:function(e){return new(e||t)},imports:[[n.h.forChild(N)],n.h]}),t})();var x=r("snw9"),$=r("XqQ8"),F=r("lJxs"),A=r("JIr8"),k=r("vkgz"),V=r("LRne"),Y=r("cDx5"),Q=r("bUwk"),D=r("zkEj"),z=r("7dP1");let X=(()=>{class t{constructor(t,e,r,s){this.actions$=t,this.http=e,this.snackBar=r,this.auth=s,this.loginRequest$=Object(x.c)(()=>this.actions$.pipe(Object(x.d)(p.LOGIN_REQUEST),Object($.a)(t=>this.http.postLoginRequest(t.payload.request).pipe(Object(F.a)(t=>new b({response:t})),Object(A.a)(t=>Object(V.a)(new m({message:Object(P.b)(t,"Failed to sign in")}))))))),this.loginSuccess$=Object(x.c)(()=>this.actions$.pipe(Object(x.d)(p.LOGIN_SUCCESS),Object(F.a)(t=>new Y.e({principal:t.payload.response,tokenDecoded:this.auth.getDecodedToken(t.payload.response.token)})))),this.loginFailure$=Object(x.c)(()=>this.actions$.pipe(Object(x.d)(p.LOGIN_FAILURE),Object(k.a)(t=>this.snackBar.openError(t.payload.message))),{dispatch:!1}),this.registerRequest$=Object(x.c)(()=>this.actions$.pipe(Object(x.d)(p.REGISTER_REQUEST),Object($.a)(t=>this.http.postRegisterRequest(t.payload.request).pipe(Object(F.a)(t=>new g({response:t})),Object(A.a)(t=>Object(V.a)(new u({message:Object(P.b)(t,"Failed to sign up")}))))))),this.registerSuccess$=Object(x.c)(()=>this.actions$.pipe(Object(x.d)(p.REGISTER_SUCCESS),Object(k.a)(()=>this.snackBar.openSuccess("Your account has been created"))),{dispatch:!1}),this.registerFailure$=Object(x.c)(()=>this.actions$.pipe(Object(x.d)(p.REGISTER_FAILURE),Object(k.a)(t=>this.snackBar.openError(t.payload.message))),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(C.Yb(x.a),C.Yb(Q.a),C.Yb(D.a),C.Yb(z.a))},t.\u0275prov=C.Kb({token:t,factory:t.\u0275fac}),t})();r.d(e,"AuthModule",(function(){return H}));let H=(()=>{class t{}return t.\u0275mod=C.Mb({type:t}),t.\u0275inj=C.Lb({factory:function(e){return new(e||t)},imports:[[s.c,i.a,o.p,a.a,G,c.j.forFeature("auth",E),x.b.forFeature([X])]]}),t})()}}]);